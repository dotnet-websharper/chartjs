(function(n){"use strict";n.IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};n.IntelliFactory.Runtime.OnLoad(function(){n.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});n.ignore=function(){};n.id=function(n){return n};n.fst=function(n){return n[0]};n.snd=function(n){return n[1]};n.trd=function(n){return n[2]};n.console||(n.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(self);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT;b=a.WebSharper=a.WebSharper||{};c=b.ChartJs=b.ChartJs||{};d=c.Testing=c.Testing||{};e=d.Client=d.Client||{};f=b.Obj=b.Obj||{};g=b.UI=b.UI||{};h=g.Var$1=g.Var$1||{};i=b.Operators=b.Operators||{};j=g.Templating=g.Templating||{};k=j.Runtime=j.Runtime||{};l=k.Server=k.Server||{};m=l.TemplateInstance=l.TemplateInstance||{};n=b.Arrays=b.Arrays||{};o=l.ProviderBuilder=l.ProviderBuilder||{};p=g.ListModel=g.ListModel||{};q=b.Unchecked=b.Unchecked||{};r=a.WebSharper$ChartJs$Testing_Templates=a.WebSharper$ChartJs$Testing_Templates||{};s=l.Handler=l.Handler||{};t=g.Var=g.Var||{};u=g.ConcreteVar=g.ConcreteVar||{};v=g.Snap=g.Snap||{};w=a.System=a.System||{};x=w.Guid=w.Guid||{};y=b.Collections=b.Collections||{};z=y.List=y.List||{};A=a.StartupCode$WebSharper_ChartJs_Testing$Client=a.StartupCode$WebSharper_ChartJs_Testing$Client||{};B=g.Client=g.Client||{};C=B.Templates=B.Templates||{};D=g.Doc=g.Doc||{};E=b.JavaScript=b.JavaScript||{};F=E.Pervasives=E.Pervasives||{};G=g.Abbrev=g.Abbrev||{};H=G.Fresh=G.Fresh||{};I=y.Dictionary=y.Dictionary||{};J=g.View=g.View||{};K=a.Object;L=g.AttrProxy=g.AttrProxy||{};M=g.CheckedInput=g.CheckedInput||{};N=b.Numeric=b.Numeric||{};O=y.HashSet=y.HashSet||{};P=b.Seq=b.Seq||{};Q=l.TemplateInitializer=l.TemplateInitializer||{};R=a.EventTarget;S=a.Node;T=E.JS=E.JS||{};U=y.DictionaryUtil=y.DictionaryUtil||{};V=b.Enumerator=b.Enumerator||{};W=V.T=V.T||{};X=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};Y=a.WindowOrWorkerGlobalScope;Z=g.Docs=g.Docs||{};_0=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};_1=g.DocElemNode=g.DocElemNode||{};_2=a.CharacterData;_3=g.Storage=g.Storage||{};_4=g.Elt=g.Elt||{};_5=C.Prepare=C.Prepare||{};_6=b.Slice=b.Slice||{};_7=g.DomUtility=g.DomUtility||{};_8=y.KeyCollection=y.KeyCollection||{};_9=g.An=g.An||{};_=B.Settings=B.Settings||{};$=G.Mailbox=G.Mailbox||{};ba=B.Attrs=B.Attrs||{};bb=ba.Dyn=ba.Dyn||{};bc=g.Array=g.Array||{};bd=_3.ArrayStorage=_3.ArrayStorage||{};be=g.Attrs=g.Attrs||{};bf=g.AttrModule=g.AttrModule||{};bg=b.List=b.List||{};bh=bg.T=bg.T||{};bi=b.Strings=b.Strings||{};bj=g.Updates=g.Updates||{};bk=y.ValueCollection=y.ValueCollection||{};bl=B.Docs=B.Docs||{};bm=bl.RunState=bl.RunState||{};bn=bl.NodeSet=bl.NodeSet||{};bo=b.Concurrency=b.Concurrency||{};bp=g.Anims=g.Anims||{};bq=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};br=y.HashSetUtil=y.HashSetUtil||{};bs=g.BindVar=g.BindVar||{};bt=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bu=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bv=g.AppendList=g.AppendList||{};bw=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bx=g.DynamicAttrNode=g.DynamicAttrNode||{};by=bo.Scheduler=bo.Scheduler||{};bz=g.Easing=g.Easing||{};bA=bo.AsyncBody=bo.AsyncBody||{};bB=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bC=bo.CT=bo.CT||{};bD=G.HashSet=G.HashSet||{};bE=g.String=g.String||{};bF=b.CancellationTokenSource=b.CancellationTokenSource||{};bG=bl.DomNodes=bl.DomNodes||{};bH=b.Queue=b.Queue||{};bI=b.Char=b.Char||{};bJ=a.Error;bK=b.OperationCanceledException=b.OperationCanceledException||{};bL=b.Lazy=b.Lazy||{};bM=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bN=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};bO=bN.LazyRecord=bN.LazyRecord||{};bP=a.IntelliFactory;bQ=bP&&bP.Runtime;bR=a.console;bS=a.Math;bT=a.Date;e.Main=function(){var bU,bV,bW,bX,bY,bZ,b0,b1,b2;bU=h.Create$1("");bV=(bW=(bX=(bY=(bZ=D.Convert(function(b3){var b4,b5,b6,b7;return(b4=(b5=new o.New$1(),(b5.h.push({$:1,$0:"name",$1:b3}),b5)),(b6=s.CompleteHoles(b4.k,b4.h,[]),(b7=new m.New(b6[1],r.listitem(b6[0])),b4.i=b7,b7))).get_Doc();},e.People().v),(b0=new o.New$1(),(b0.h.push({$:0,$0:"listcontainer",$1:bZ}),b0))),(bY.h.push({$:8,$0:"name",$1:bU}),bY)),(bX.h.push(s.EventQ2(bX.k,"add",function(){return bX.i;},function(){e.People().Append(bU.Get());bU.Set("");})),bX)),(b1=s.CompleteHoles(bW.k,bW.h,[["name",0]]),(b2=new m.New(b1[1],r.main(b1[0])),bW.i=b2,b2))).get_Doc();C.LoadLocalTemplates("");D.RunById("main",bV);};e.People=function(){A.$cctor();return A.People;};f=b.Obj=bQ.Class({Equals:function(bU){return this===bU;},GetHashCode:function(){return -1;}},null,f);f.New=bQ.Ctor(function(){},f);h=g.Var$1=bQ.Class({},f,h);h.Create$1=function(bU){return new u.New(false,v.New({$:2,$0:bU,$1:[]}),bU);};i.FailWith=function(bU){throw new bJ(bU);};i.KeyValue=function(bU){return[bU.K,bU.V];};m=l.TemplateInstance=bQ.Class({get_Doc:function(){return this.doc;}},f,m);m.New=bQ.Ctor(function(bU,bV){f.New.call(this);this.doc=bV;this.allVars=bU.$==0?bU.$0:i.FailWith("Should not happen");},m);n.get=function(bU,bV){n.checkBounds(bU,bV);return bU[bV];};n.set=function(bU,bV,bW){n.checkBounds(bU,bV);bU[bV]=bW;};n.checkBounds=function(bU,bV){if(bV<0||bV>=bU.length)i.FailWith("Index was outside the bounds of the array.");};n.length=function(bU){return bU.dims===2?bU.length*bU.length:bU.length;};o=l.ProviderBuilder=bQ.Class({},f,o);o.New$1=bQ.Ctor(function(){var bU;f.New.call(this);this.i=null;this.k=(bU=x.NewGuid(),a.String(bU));this.h=[];bQ.SetOptional(this,"s",null);},o);p=g.ListModel=bQ.Class({Append:function(bU){var bV,bW,bX,bY;bV=this;bW=this["var"].Get();bX=this.key(bU);bY=n.tryFindIndex(function(bZ){return q.Equals(bV.key(bZ),bX);},bW);if(bY!=null&&bY.$==1)this["var"].Set(this.storage.SSetAt(bY.$0,bU,bW));else this["var"].Set(this.storage.SAppend(bU,bW));this.ObsoleteKey(bX);},ObsoleteKey:function(bU){var bV,bW;bV=(bW=null,[this.it.TryGetValue(bU,{get:function(){return bW;},set:function(bX){bW=bX;}}),bW]);if(bV[0]){v.Obsolete(bV[1]);this.it.Remove(bU);}},GetEnumerator:function(){return V.Get(this["var"].Get());},GetEnumerator0:function(){return V.Get0(this["var"].Get());}},f,p);p.New=bQ.Ctor(function(bU,bV){p.New$3.call(this,bU,h.Create$1(n.ofSeq(P.distinctBy(bU,bV.SInit()))),bV);},p);p.New$3=bQ.Ctor(function(bU,bV,bW){f.New.call(this);this.key=bU;this["var"]=bV;this.storage=bW;this.v=J.Map(function(bX){return bX.slice();},this["var"].get_View());this.it=new I.New$5();},p);q.Equals=function(bU,bV){var bW,bX,bY,bZ;if(bU===bV)return true;else{bW=typeof bU;if(bW=="object"){if(bU===null||bU===void 0||bV===null||bV===void 0)return false;else if("Equals"in bU)return bU.Equals(bV);else if(bU instanceof a.Array&&bV instanceof a.Array)return q.arrayEquals(bU,bV);else if(bU instanceof a.Date&&bV instanceof a.Date)return q.dateEquals(bU,bV);else{bX=[true];for(var b0 in bU)if(function(b1){bX[0]=!bU.hasOwnProperty(b1)||bV.hasOwnProperty(b1)&&q.Equals(bU[b1],bV[b1]);return!bX[0];}(b0))break;if(bX[0]){for(var b1 in bV)if(function(b2){bX[0]=!bV.hasOwnProperty(b2)||bU.hasOwnProperty(b2);return!bX[0];}(b1))break;}return bX[0];}}else return bW=="function"&&("$Func"in bU?bU.$Func===bV.$Func&&bU.$Target===bV.$Target:"$Invokes"in bU&&"$Invokes"in bV&&q.arrayEquals(bU.$Invokes,bV.$Invokes));}};q.arrayEquals=function(bU,bV){var bW,bX;if(n.length(bU)===n.length(bV)){bW=true;bX=0;while(bW&&bX<n.length(bU)){!q.Equals(n.get(bU,bX),n.get(bV,bX))?bW=false:void 0;bX=bX+1;}return bW;}else return false;};q.dateEquals=function(bU,bV){return bU.getTime()===bV.getTime();};q.Hash=function(bU){var bV;bV=typeof bU;return bV=="function"?0:bV=="boolean"?bU?1:0:bV=="number"?bU:bV=="string"?q.hashString(bU):bV=="object"?bU==null?0:bU instanceof a.Array?q.hashArray(bU):q.hashObject(bU):0;};q.hashString=function(bU){var bV,bW,bX;if(bU===null)return 0;else{bV=5381;for(bW=0,bX=bU.length-1;bW<=bX;bW++)bV=q.hashMix(bV,bU[bW].charCodeAt());return bV;}};q.hashArray=function(bU){var bV,bW,bX;bV=-34948909;for(bW=0,bX=n.length(bU)-1;bW<=bX;bW++)bV=q.hashMix(bV,q.Hash(n.get(bU,bW)));return bV;};q.hashObject=function(bU){var bV,bW;if("GetHashCode"in bU)return bU.GetHashCode();else{bV=[0];for(var bX in bU)if(function(bY){bV[0]=q.hashMix(q.hashMix(bV[0],q.hashString(bY)),q.Hash(bU[bY]));return false;}(bX))break;return bV[0];}};q.hashMix=function(bU,bV){return(bU<<5)+bU+bV;};q.Compare=function(bU,bV){var bW,bX,bY,bZ,b0,b1;if(bU===bV)return 0;else{bX=typeof bU;switch(bX=="function"?1:bX=="boolean"?2:bX=="number"?2:bX=="string"?2:bX=="object"?3:0){case 0:return typeof bV=="undefined"?0:-1;case 1:return i.FailWith("Cannot compare function values.");case 2:return bU<bV?-1:1;case 3:if(bU===null)bY=-1;else if(bV===null)bY=1;else if("CompareTo"in bU)bY=bU.CompareTo(bV);else if("CompareTo0"in bU)bY=bU.CompareTo0(bV);else if(bU instanceof a.Array&&bV instanceof a.Array)bY=q.compareArrays(bU,bV);else if(bU instanceof a.Date&&bV instanceof a.Date)bY=q.compareDates(bU,bV);else{bZ=[0];for(var b2 in bU)if(function(b3){return!bU.hasOwnProperty(b3)?false:!bV.hasOwnProperty(b3)?(bZ[0]=1,true):(bZ[0]=q.Compare(bU[b3],bV[b3]),bZ[0]!==0);}(b2))break;if(bZ[0]===0){for(var b3 in bV)if(function(b4){return!bV.hasOwnProperty(b4)?false:!bU.hasOwnProperty(b4)&&(bZ[0]=-1,true);}(b3))break;}bY=bZ[0];}return bY;}}};q.compareArrays=function(bU,bV){var bW,bX;if(n.length(bU)<n.length(bV))return -1;else if(n.length(bU)>n.length(bV))return 1;else{bW=0;bX=0;while(bW===0&&bX<n.length(bU)){bW=q.Compare(n.get(bU,bX),n.get(bV,bX));bX=bX+1;}return bW;}};q.compareDates=function(bU,bV){return q.Compare(bU.getTime(),bV.getTime());};r.listitem=function(bU){C.LoadLocalTemplates("index");return bU?C.NamedTemplate("index",{$:1,$0:"listitem"},bU):void 0;};r.main=function(bU){C.LoadLocalTemplates("index");return bU?C.NamedTemplate("index",{$:1,$0:"main"},bU):void 0;};s.EventQ2=function(bU,bV,bW,bX){return{$:5,$0:bV,$1:function(bY){return function(bZ){return bX({Vars:bW(),Target:bY,Event:bZ});};}};};s.CompleteHoles=function(bU,bV,bW){var bY,bZ,b0,b1,b2;function bX(b3,b4){var b5;return bZ.Contains(b3)?null:(b5=b4===0?Q.GetOrAddHoleFor(bU,b3,function(){return{$:8,$0:b3,$1:h.Create$1("")};}):b4===1?Q.GetOrAddHoleFor(bU,b3,function(){return{$:13,$0:b3,$1:h.Create$1(0)};}):b4===2?Q.GetOrAddHoleFor(bU,b3,function(){return{$:9,$0:b3,$1:h.Create$1(false)};}):i.FailWith("Invalid value type"),(bY.set_Item(b3,b5),{$:1,$0:b5}));}bY=new I.New$5();bZ=new O.New$3();b0=V.Get(bV);try{while(b0.MoveNext()){b1=b0.Current();b2=b1.$0;bZ.Add(b2);bY.set_Item(b2,b1);}}finally{if(typeof b0=="object"&&"Dispose"in b0)b0.Dispose();}return[P.append(bV,n.choose(function(b3){return bX(b3[0],b3[1]);},bW)),{$:0,$0:bY}];};t=g.Var=bQ.Class({},f,t);t.New=bQ.Ctor(function(){f.New.call(this);},t);u=g.ConcreteVar=bQ.Class({Get:function(){return this.current;},Set:function(bU){if(this.isConst)(function(bV){return bV("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bV){bR.log(bV);}));else{v.Obsolete(this.snap);this.current=bU;this.snap=v.New({$:2,$0:bU,$1:[]});}},get_View:function(){return this.view;},UpdateMaybe:function(bU){var bV;bV=bU(this.Get());if(bV!=null&&bV.$==1)this.Set(bV.$0);}},t,u);u.New=bQ.Ctor(function(bU,bV,bW){var bX;bX=this;t.New.call(this);this.isConst=bU;this.current=bW;this.snap=bV;this.view=function(){return bX.snap;};this.id=H.Int();},u);v.Map=function(bU,bV){var bW,bX;bW=bV.s;return bW!=null&&bW.$==0?v.New({$:0,$0:bU(bW.$0)}):(bX=v.New({$:3,$0:[],$1:[]}),(v.When(bV,function(bY){v.MarkDone(bX,bV,bU(bY));},bX),bX));};v.WhenRun=function(bU,bV,bW){var bX;bX=bU.s;if(bX==null)bW();else bX!=null&&bX.$==2?(bX.$1.push(bW),bV(bX.$0)):bX!=null&&bX.$==3?(bX.$0.push(bV),bX.$1.push(bW)):bV(bX.$0);};v.WhenObsoleteRun=function(bU,bV){var bW;bW=bU.s;if(bW==null)bV();else bW!=null&&bW.$==2?bW.$1.push(bV):bW!=null&&bW.$==3?bW.$1.push(bV):void 0;};v.When=function(bU,bV,bW){var bX;bX=bU.s;if(bX==null)v.Obsolete(bW);else bX!=null&&bX.$==2?(v.EnqueueSafe(bX.$1,bW),bV(bX.$0)):bX!=null&&bX.$==3?(bX.$0.push(bV),v.EnqueueSafe(bX.$1,bW)):bV(bX.$0);};v.MarkDone=function(bU,bV,bW){var bX;if(bX=bV.s,bX!=null&&bX.$==0)v.MarkForever(bU,bW);else v.MarkReady(bU,bW);};v.Map3=function(bU,bV,bW,bX){var bY,bZ,b0,b1;function b2(b3){var b4,b5,b6,b7;if(!(b4=b1.s,b4!=null&&b4.$==0||b4!=null&&b4.$==2)){b5=v.ValueAndForever(bV);b6=v.ValueAndForever(bW);b7=v.ValueAndForever(bX);if(b5!=null&&b5.$==1)b6!=null&&b6.$==1?b7!=null&&b7.$==1?b5.$0[1]&&b6.$0[1]&&b7.$0[1]?v.MarkForever(b1,bU(b5.$0[0],b6.$0[0],b7.$0[0])):v.MarkReady(b1,bU(b5.$0[0],b6.$0[0],b7.$0[0])):void 0:void 0;}}bY=bV.s;bZ=bW.s;b0=bX.s;return bY!=null&&bY.$==0?bZ!=null&&bZ.$==0?b0!=null&&b0.$==0?v.New({$:0,$0:bU(bY.$0,bZ.$0,b0.$0)}):v.Map3Opt1(bU,bY.$0,bZ.$0,bX):b0!=null&&b0.$==0?v.Map3Opt2(bU,bY.$0,b0.$0,bW):v.Map3Opt3(bU,bY.$0,bW,bX):bZ!=null&&bZ.$==0?b0!=null&&b0.$==0?v.Map3Opt4(bU,bZ.$0,b0.$0,bV):v.Map3Opt5(bU,bZ.$0,bV,bX):b0!=null&&b0.$==0?v.Map3Opt6(bU,b0.$0,bV,bW):(b1=v.New({$:3,$0:[],$1:[]}),(v.When(bV,b2,b1),v.When(bW,b2,b1),v.When(bX,b2,b1),b1));};v.Sequence=function(bU){var bV,bW,bX;function bY(bZ){var b0;if(bX[0]===0){b0=n.map(function(b1){var b2;b2=b1.s;return b2!=null&&b2.$==0?b2.$0:b2!=null&&b2.$==2?b2.$0:i.FailWith("value not found by View.Sequence");},bV);if(n.forall(function(b1){var b2;b2=b1.s;return b2!=null&&b2.$==0;},bV))v.MarkForever(bW,b0);else v.MarkReady(bW,b0);}else bX[0]--;}bV=n.ofSeq(bU);return bV.length==0?v.New({$:0,$0:[]}):(bW=v.New({$:3,$0:[],$1:[]}),(bX=[n.length(bV)-1],(n.iter(function(bZ){v.When(bZ,bY,bW);},bV),bW)));};v.Map2=function(bU,bV,bW){var bX,bY,bZ;function b0(b1){var b2,b3,b4;if(!(b2=bZ.s,b2!=null&&b2.$==0||b2!=null&&b2.$==2)){b3=v.ValueAndForever(bV);b4=v.ValueAndForever(bW);if(b3!=null&&b3.$==1)b4!=null&&b4.$==1?b3.$0[1]&&b4.$0[1]?v.MarkForever(bZ,bU(b3.$0[0],b4.$0[0])):v.MarkReady(bZ,bU(b3.$0[0],b4.$0[0])):void 0;}}bX=bV.s;bY=bW.s;return bX!=null&&bX.$==0?bY!=null&&bY.$==0?v.New({$:0,$0:bU(bX.$0,bY.$0)}):v.Map2Opt1(bU,bX.$0,bW):bY!=null&&bY.$==0?v.Map2Opt2(bU,bY.$0,bV):(bZ=v.New({$:3,$0:[],$1:[]}),(v.When(bV,b0,bZ),v.When(bW,b0,bZ),bZ));};v.Map2Unit=function(bU,bV){var bW,bX,bY;function bZ(){var b0,b1,b2;if(!(b0=bY.s,b0!=null&&b0.$==0||b0!=null&&b0.$==2)){b1=v.ValueAndForever(bU);b2=v.ValueAndForever(bV);if(b1!=null&&b1.$==1)b2!=null&&b2.$==1?b1.$0[1]&&b2.$0[1]?v.MarkForever(bY,null):v.MarkReady(bY,null):void 0;}}bW=bU.s;bX=bV.s;return bW!=null&&bW.$==0?bX!=null&&bX.$==0?v.New({$:0,$0:null}):bV:bX!=null&&bX.$==0?bU:(bY=v.New({$:3,$0:[],$1:[]}),(v.When(bU,bZ,bY),v.When(bV,bZ,bY),bY));};v.Copy=function(bU){var bV,bW,bX;bV=bU.s;return bV==null?bU:bV!=null&&bV.$==2?(bW=v.New({$:2,$0:bV.$0,$1:[]}),(v.WhenObsolete(bU,bW),bW)):bV!=null&&bV.$==3?(bX=v.New({$:3,$0:[],$1:[]}),(v.When(bU,function(bY){v.MarkDone(bX,bU,bY);},bX),bX)):bU;};v.EnqueueSafe=function(bU,bV){var bW,bX,bY,bZ;bU.push(bV);if(bU.length%20===0){bW=bU.slice(0);bH.Clear(bU);for(bX=0,bY=n.length(bW)-1;bX<=bY;bX++){bZ=n.get(bW,bX);if(typeof bZ=="object")(function(b0){if(b0.s)bU.push(b0);}(bZ));else(function(b0){bU.push(b0);}(bZ));}}else void 0;};v.MarkForever=function(bU,bV){var bW,bX,bY,bZ;bW=bU.s;if(bW!=null&&bW.$==3){bU.s={$:0,$0:bV};bX=bW.$0;for(bY=0,bZ=n.length(bX)-1;bY<=bZ;bY++)(n.get(bX,bY))(bV);}else void 0;};v.MarkReady=function(bU,bV){var bW,bX,bY,bZ;bW=bU.s;if(bW!=null&&bW.$==3){bU.s={$:2,$0:bV,$1:bW.$1};bX=bW.$0;for(bY=0,bZ=n.length(bX)-1;bY<=bZ;bY++)(n.get(bX,bY))(bV);}else void 0;};v.Join=function(bU){var bV;bV=v.New({$:3,$0:[],$1:[]});v.When(bU,function(bW){var bX;bX=bW();v.When(bX,function(bY){var bZ,b0;if((bZ=bX.s,bZ!=null&&bZ.$==0)&&(b0=bU.s,b0!=null&&b0.$==0))v.MarkForever(bV,bY);else v.MarkReady(bV,bY);},bV);},bV);return bV;};v.Map3Opt1=function(bU,bV,bW,bX){return v.Map(function(bY){return bU(bV,bW,bY);},bX);};v.Map3Opt2=function(bU,bV,bW,bX){return v.Map(function(bY){return bU(bV,bY,bW);},bX);};v.Map3Opt3=function(bU,bV,bW,bX){return v.Map2(function(bY,bZ){return bU(bV,bY,bZ);},bW,bX);};v.Map3Opt4=function(bU,bV,bW,bX){return v.Map(function(bY){return bU(bY,bV,bW);},bX);};v.Map3Opt5=function(bU,bV,bW,bX){return v.Map2(function(bY,bZ){return bU(bY,bV,bZ);},bW,bX);};v.Map3Opt6=function(bU,bV,bW,bX){return v.Map2(function(bY,bZ){return bU(bY,bZ,bV);},bW,bX);};v.ValueAndForever=function(bU){var bV;bV=bU.s;return bV!=null&&bV.$==0?{$:1,$0:[bV.$0,true]}:bV!=null&&bV.$==2?{$:1,$0:[bV.$0,false]}:null;};v.Map2Opt1=function(bU,bV,bW){return v.Map(function(bX){return bU(bV,bX);},bW);};v.Map2Opt2=function(bU,bV,bW){return v.Map(function(bX){return bU(bX,bV);},bW);};v.WhenObsolete=function(bU,bV){var bW;bW=bU.s;if(bW==null)v.Obsolete(bV);else bW!=null&&bW.$==2?v.EnqueueSafe(bW.$1,bV):bW!=null&&bW.$==3?v.EnqueueSafe(bW.$1,bV):void 0;};x.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bU){var bV,bW;bV=bS.random()*16|0;bW=bU=="x"?bV:bV&3|8;return bW.toString(16);});};z=y.List=bQ.Class({GetEnumerator:function(){return V.Get(this);},GetEnumerator0:function(){return V.Get0(this);}},null,z);A.$cctor=function(){A.$cctor=a.ignore;A.People=p.FromSeq(["John","Paul"]);};C.LoadLocalTemplates=function(bU){!C.LocalTemplatesLoaded()?(C.set_LocalTemplatesLoaded(true),C.LoadNestedTemplates(self.document.body,"")):void 0;C.LoadedTemplates().set_Item(bU,C.LoadedTemplateFile(""));};C.NamedTemplate=function(bU,bV,bW){var bX,bY;bX=(bY=null,[C.LoadedTemplateFile(bU).TryGetValue(bV==null?"":bV.$0,{get:function(){return bY;},set:function(bZ){bY=bZ;}}),bY]);return bX[0]?C.ChildrenTemplate(bX[1].cloneNode(true),bW):(bR.warn("Local template doesn't exist",bV),D.get_Empty());};C.LocalTemplatesLoaded=function(){X.$cctor();return X.LocalTemplatesLoaded;};C.set_LocalTemplatesLoaded=function(bU){X.$cctor();X.LocalTemplatesLoaded=bU;};C.LoadNestedTemplates=function(bU,bV){var bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9;function bW(b_){var b$,ca;if(!bX.ContainsKey(b_)){b$=(ca=null,[bY.TryGetValue(b_,{get:function(){return ca;},set:function(cb){ca=cb;}}),ca]);if(b$[0]){b9.Add(b_);bY.Remove(b_);C.PrepareTemplateStrict(bV,{$:1,$0:b_},b$[1],{$:1,$0:bW});}else bR.warn(b9.Contains(b_)?"Encountered loop when instantiating "+b_:"Local template does not exist: "+b_);}}bX=C.LoadedTemplateFile(bV);bY=new I.New$5();bZ=bU.querySelectorAll("[ws-template]");for(b0=0,b1=bZ.length-1;b0<=b1;b0++){b2=bZ[b0];b3=b2.getAttribute("ws-template").toLowerCase();b2.removeAttribute("ws-template");bY.set_Item(b3,C.FakeRootSingle(b2));}b4=bU.querySelectorAll("[ws-children-template]");for(b5=0,b6=b4.length-1;b5<=b6;b5++){b7=b4[b5];b8=b7.getAttribute("ws-children-template").toLowerCase();b7.removeAttribute("ws-children-template");bY.set_Item(b8,C.FakeRoot(b7));}b9=new O.New$3();while(bY.count>0)bW(P.head(bY.get_Keys()));};C.LoadedTemplates=function(){X.$cctor();return X.LoadedTemplates;};C.LoadedTemplateFile=function(bU){var bV,bW,bX;bV=(bW=null,[C.LoadedTemplates().TryGetValue(bU,{get:function(){return bW;},set:function(bY){bW=bY;}}),bW]);return bV[0]?bV[1]:(bX=new I.New$5(),(C.LoadedTemplates().set_Item(bU,bX),bX));};C.ChildrenTemplate=function(bU,bV){var bW,bX,bY,bZ,b0;bW=C.InlineTemplate(bU,P.append(bV,C.GlobalHoles().get_Values()));bX=bW[1];bY=bW[0];bZ=bY.Els;return!q.Equals(bZ,null)&&bZ.length===1&&(n.get(bZ,0)instanceof S&&(q.Equals(n.get(bZ,0).nodeType,S.ELEMENT_NODE)&&(b0=n.get(bZ,0),true)))?_4.TreeNode(bY,bX):D.Mk({$:6,$0:bY},bX);};C.FakeRootSingle=function(bU){var bV,bW,bX,bY;bU.removeAttribute("ws-template");bV=bU.getAttribute("ws-replace");if(bV===null);else{bU.removeAttribute("ws-replace");bW=bU.parentNode;q.Equals(bW,null)?void 0:(bX=self.document.createElement(bU.tagName),bX.setAttribute("ws-replace",bV),bW.replaceChild(bX,bU));}bY=self.document.createElement("div");bY.appendChild(bU);return bY;};C.FakeRoot=function(bU){var bV;bV=self.document.createElement("div");while(bU.hasChildNodes())bV.appendChild(bU.firstChild);return bV;};C.PrepareTemplateStrict=function(bU,bV,bW,bX){var bY;function bZ(b5,b6){var b7,b8,b9,b_,b$,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv;function ca(cw){}while(true)switch(b5){case 0:if(b6!==null){b7=b6.nextSibling;if(q.Equals(b6.nodeType,S.TEXT_NODE))_5.convertTextNode(b6);else if(q.Equals(b6.nodeType,S.ELEMENT_NODE))b1(b6);b6=b7;}else return null;break;case 1:cb=_6.string(b6.nodeName,{$:1,$0:3},null).toLowerCase();cc=(b8=cb.indexOf("."),b8===-1?[bU,cb]:[_6.string(cb,null,{$:1,$0:b8-1}),_6.string(cb,{$:1,$0:b8+1},null)]);cd=cc[1];ce=cc[0];if(ce!==""&&!C.LoadedTemplates().ContainsKey(ce))return _5.failNotLoaded(cd);else{if(ce===""&&bX!=null)bX.$0(cd);cf=C.LoadedTemplates().get_Item(ce);if(!cf.ContainsKey(cd))return _5.failNotLoaded(cd);else{cg=cf.get_Item(cd);ch=cg.cloneNode(true);ci=new O.New$3();cj=new I.New$5();ck=b6.attributes;for(cl=0,cm=ck.length-1;cl<=cm;cl++){cn=ck.item(cl).name.toLowerCase();cj.set_Item(cn,(co=ck.item(cl).nodeValue,co===""?cn:co.toLowerCase()));if(!ci.Add(cn))bR.warn("Hole mapped twice",cn);}for(cp=0,cq=b6.childNodes.length-1;cp<=cq;cp++){cr=b6.childNodes[cp];if(q.Equals(cr.nodeType,S.ELEMENT_NODE))!ci.Add(cr.nodeName.toLowerCase())?bR.warn("Hole filled twice",cd):void 0;}cs=b6.childNodes.length===1&&q.Equals(b6.firstChild.nodeType,S.TEXT_NODE);if(cs){b_=_5.fillTextHole(ch,b6.firstChild.textContent,cd);((function(cw){return function(cx){if(cx!=null)cw(cx.$0);};}((b$=function(cw){return function(cx){return cw.Add(cx);};}(ci),function(cw){return ca(b$(cw));})))(b_));}_5.removeHolesExcept(ch,ci);if(!cs){for(ct=0,cu=b6.childNodes.length-1;ct<=cu;ct++){cv=b6.childNodes[ct];if(q.Equals(cv.nodeType,S.ELEMENT_NODE))cv.hasAttributes()?_5.fillInstanceAttrs(ch,cv):b0(ch,cv);}}_5.mapHoles(ch,cj);_5.fill(ch,b6.parentNode,b6);b6.parentNode.removeChild(b6);return;}}break;}}function b0(b5,b6){var b7,b9,b_;function b8(b$,ca){var cb;if(b9==="title"&&b6.hasChildNodes()){cb=_7.ParseHTMLIntoFakeRoot(b6.textContent);b6.removeChild(b6.firstChild);while(cb.hasChildNodes())b6.appendChild(cb.firstChild);}else null;b1(b6);return _5.fill(b6,b$,ca);}b9=b6.nodeName.toLowerCase();C.foreachNotPreserved(b5,"[ws-attr-holes]",function(b$){var ca,cb,cc,cd,ce;ca=bi.SplitChars(b$.getAttribute("ws-attr-holes"),[" "],1);for(cb=0,cc=ca.length-1;cb<=cc;cb++){cd=n.get(ca,cb);b$.setAttribute(cd,(ce=new a.RegExp("\\${"+b9+"}","ig"),b$.getAttribute(cd).replace(ce,b6.textContent)));}});b_=b5.querySelector("[ws-hole="+b9+"]");if(q.Equals(b_,null)){b7=b5.querySelector("[ws-replace="+b9+"]");return q.Equals(b7,null)?null:(b8(b7.parentNode,b7),void b7.parentNode.removeChild(b7));}else{while(b_.hasChildNodes())b_.removeChild(b_.lastChild);b_.removeAttribute("ws-hole");return b8(b_,null);}}function b1(b5){if(!b5.hasAttribute("ws-preserve"))if(bi.StartsWith(b5.nodeName.toLowerCase(),"ws-"))b3(b5);else{_5.convertAttrs(b5);b2(b5.firstChild);}}function b2(b5){return bZ(0,b5);}function b3(b5){return bZ(1,b5);}function b4(b5){var b6,b7,b8,b9;while(true){b6=b5.querySelector("[ws-template]");if(q.Equals(b6,null)){b7=b5.querySelector("[ws-children-template]");if(q.Equals(b7,null))return null;else{b8=b7.getAttribute("ws-children-template");b7.removeAttribute("ws-children-template");C.PrepareTemplateStrict(bU,{$:1,$0:b8},b7,null);b5=b5;}}else{b9=b6.getAttribute("ws-template");(C.PrepareSingleTemplate(bU,{$:1,$0:b9},b6))(null);b5=b5;}}}bY=(bV==null?"":bV.$0).toLowerCase();C.LoadedTemplateFile(bU).set_Item(bY,bW);if(bW.hasChildNodes()){b4(bW);b2(bW.firstChild);}};C.InlineTemplate=function(bU,bV){var bW,bX,bY,bZ,b2,b3,b4,b5,b6,b7,b8;function b0(b9,b_){var b$,ca,cb;b$=be.Insert(b9,b_);b3.push(be.Updates(b$));b4.push([b9,b$]);ca=bQ.GetOptional(b$.OnAfterRender);return ca==null?null:(cb=ca.$0,void b5.push(function(){cb(b9);}));}function b1(b9){var b_,b$;b_=(b$=null,[b6.TryGetValue(b9,{get:function(){return b$;},set:function(ca){b$=ca;}}),b$]);return b_[0]?b_[1].$==0?{$:1,$0:b_[1].$1}:b_[1].$==1?{$:1,$0:D.TextNode(b_[1].$1)}:b_[1].$==2?{$:1,$0:D.TextView(b_[1].$1)}:b_[1].$==8?{$:1,$0:D.TextView(b_[1].$1.get_View())}:b_[1].$==9?{$:1,$0:D.TextView(J.Map(a.String,b_[1].$1.get_View()))}:b_[1].$==10?{$:1,$0:D.TextView(J.Map(function(ca){return ca.get_Input();},b_[1].$1.get_View()))}:b_[1].$==11?{$:1,$0:D.TextView(J.Map(a.String,b_[1].$1.get_View()))}:b_[1].$==12?{$:1,$0:D.TextView(J.Map(function(ca){return ca.get_Input();},b_[1].$1.get_View()))}:b_[1].$==13?{$:1,$0:D.TextView(J.Map(a.String,b_[1].$1.get_View()))}:(bR.warn("Content hole filled with attribute data",b9),null):null;}b2=[];b3=[];b4=[];b5=[];b6=new I.New$5();b7=V.Get(bV);try{while(b7.MoveNext()){b8=b7.Current();b6.set_Item(b8.$0,b8);}}finally{if(typeof b7=="object"&&"Dispose"in b7)b7.Dispose();}bW=_7.ChildrenArray(bU);C.foreachNotPreserved(bU,"[ws-hole]",function(b9){var b_,b$,ca;ca=b9.getAttribute("ws-hole");b9.removeAttribute("ws-hole");while(b9.hasChildNodes())b9.removeChild(b9.lastChild);b_=b1(ca);if(b_!=null&&b_.$==1){b$=b_.$0;Z.LinkElement(b9,b$.docNode);b2.push(_1.New(be.Empty(b9),b$.docNode,null,b9,H.Int(),null));b3.push(b$.updates);}});C.foreachNotPreserved(bU,"[ws-replace]",function(b9){var b_,b$,ca,cb,cc,cd;b_=b1(b9.getAttribute("ws-replace"));if(b_!=null&&b_.$==1){b$=b_.$0;ca=b9.parentNode;cb=self.document.createTextNode("");ca.replaceChild(cb,b9);cc=Z.InsertBeforeDelim(cb,b$.docNode);cd=n.tryFindIndex(function(ce){return b9===ce;},bW);cd==null?void 0:n.set(bW,cd.$0,b$.docNode);b2.push(_1.New(be.Empty(ca),b$.docNode,{$:1,$0:[cc,cb]},ca,H.Int(),null));b3.push(b$.updates);}});C.foreachNotPreserved(bU,"[ws-attr]",function(b9){var b_,b$,ca;b_=b9.getAttribute("ws-attr");b9.removeAttribute("ws-attr");b$=(ca=null,[b6.TryGetValue(b_,{get:function(){return ca;},set:function(cb){ca=cb;}}),ca]);if(b$[0])b$[1].$==3?b0(b9,b$[1].$1):bR.warn("Attribute hole filled with non-attribute data",b_);});C.foreachNotPreserved(bU,"[ws-on]",function(b9){b0(b9,L.Concat(n.choose(function(b_){var b$,ca,cb;b$=bi.SplitChars(b_,[":"],1);ca=(cb=null,[b6.TryGetValue(n.get(b$,1),{get:function(){return cb;},set:function(cc){cb=cc;}}),cb]);return ca[0]?ca[1].$==4?{$:1,$0:bf.Handler(n.get(b$,0),ca[1].$1)}:ca[1].$==5?{$:1,$0:L.Handler(n.get(b$,0),ca[1].$1)}:(bR.warn("Event hole on"+n.get(b$,0)+" filled with non-event data",n.get(b$,1)),null):null;},bi.SplitChars(b9.getAttribute("ws-on"),[" "],1))));b9.removeAttribute("ws-on");});C.foreachNotPreserved(bU,"[ws-onafterrender]",function(b9){var b_,b$,ca;b_=b9.getAttribute("ws-onafterrender");b$=(ca=null,[b6.TryGetValue(b_,{get:function(){return ca;},set:function(cb){ca=cb;}}),ca]);if(b$[0])b$[1].$==6?(b9.removeAttribute("ws-onafterrender"),b0(b9,bf.OnAfterRender(b$[1].$1))):b$[1].$==7?(b9.removeAttribute("ws-onafterrender"),b0(b9,bf.OnAfterRender(b$[1].$1))):bR.warn("onafterrender hole filled with non-onafterrender data",b_);});C.foreachNotPreserved(bU,"[ws-var]",function(b9){var b_,b$,ca;b_=b9.getAttribute("ws-var");b9.removeAttribute("ws-var");b$=(ca=null,[b6.TryGetValue(b_,{get:function(){return ca;},set:function(cb){ca=cb;}}),ca]);if(b$[0])b$[1].$==8?b0(b9,bf.Value(b$[1].$1)):b$[1].$==9?b0(b9,bf.Checked(b$[1].$1)):b$[1].$==10?b0(b9,bf.IntValue(b$[1].$1)):b$[1].$==11?b0(b9,bf.IntValueUnchecked(b$[1].$1)):b$[1].$==12?b0(b9,bf.FloatValue(b$[1].$1)):b$[1].$==13?b0(b9,bf.FloatValueUnchecked(b$[1].$1)):bR.warn("Var hole filled with non-Var data",b_);});C.foreachNotPreserved(bU,"[ws-attr-holes]",function(b9){var b_,b$,ca,cb;b_=new a.RegExp(C.TextHoleRE(),"g");b$=bi.SplitChars(b9.getAttribute("ws-attr-holes"),[" "],1);b9.removeAttribute("ws-attr-holes");for(ca=0,cb=b$.length-1;ca<=cb;ca++)(function(){var cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co;cl=n.get(b$,ca);cm=b9.getAttribute(cl);cc=null;cd=0;cn=[];while(cc=b_.exec(cm),cc!==null){co=_6.string(cm,{$:1,$0:cd},{$:1,$0:b_.lastIndex-n.get(cc,0).length-1});cd=b_.lastIndex;cn.push([co,n.get(cc,1)]);}cf=_6.string(cm,{$:1,$0:cd},null);b_.lastIndex=0;cg=n.foldBack(function(cp,cq){return(function(cr){var cs,ct;cs=cr[0];ct=cr[1];return function(cu){var cv,cw,cx,cy,cz;cv=cu[0];cw=cu[1];cx=(cy=(cz=null,[b6.TryGetValue(ct,{get:function(){return cz;},set:function(cA){cz=cA;}}),cz]),cy[0]?cy[1].$==1?{$:0,$0:cy[1].$1}:cy[1].$==2?{$:1,$0:cy[1].$1}:cy[1].$==8?{$:1,$0:cy[1].$1.get_View()}:cy[1].$==9?{$:1,$0:J.Map(a.String,cy[1].$1.get_View())}:cy[1].$==10?{$:1,$0:J.Map(function(cA){return cA.get_Input();},cy[1].$1.get_View())}:cy[1].$==11?{$:1,$0:J.Map(a.String,cy[1].$1.get_View())}:cy[1].$==12?{$:1,$0:J.Map(function(cA){return cA.get_Input();},cy[1].$1.get_View())}:cy[1].$==13?{$:1,$0:J.Map(a.String,cy[1].$1.get_View())}:(bR.warn("Attribute value hole filled with non-text data",ct),{$:0,$0:""}):{$:0,$0:""});return cx.$==1?[cs,new bh({$:1,$0:cv===""?cx.$0:J.Map(function(cA){return cA+cv;},cx.$0),$1:cw})]:[cs+cx.$0+cv,cw];};}(cp))(cq);},cn,[cf,bh.Empty]);return b0(b9,cg[1].$==1?cg[1].$1.$==1?cg[1].$1.$1.$==1?cg[1].$1.$1.$1.$==0?(ch=cg[0],bf.Dynamic(cl,J.Map3(function(cp,cq,cr){return ch+cp+cq+cr;},cg[1].$0,cg[1].$1.$0,cg[1].$1.$1.$0))):(ci=cg[0],bf.Dynamic(cl,J.Map(function(cp){return ci+bi.concat("",cp);},J.Sequence(cg[1])))):(cj=cg[0],bf.Dynamic(cl,J.Map2(function(cp,cq){return cj+cp+cq;},cg[1].$0,cg[1].$1.$0))):cg[0]===""?bf.Dynamic(cl,cg[1].$0):(ck=cg[0],bf.Dynamic(cl,J.Map(function(cp){return ck+cp;},cg[1].$0))):L.Create(cl,cg[0]));}());});return[bQ.DeleteEmptyFields({Els:bW,Dirty:true,Holes:b2,Attrs:b4,Render:(bX=b5.length==0?null:{$:1,$0:function(b9){n.iter(function(b_){b_(b9);},b5);}},bX?bX.$0:void 0),El:(bY=!q.Equals(bW,null)&&bW.length===1&&(n.get(bW,0)instanceof S&&(n.get(bW,0)instanceof a.Element&&(bZ=n.get(bW,0),true)))?{$:1,$0:bZ}:null,bY?bY.$0:void 0)},["Render","El"]),bc.TreeReduce(J.Const(),J.Map2Unit,b3)];};C.GlobalHoles=function(){X.$cctor();return X.GlobalHoles;};C.foreachNotPreserved=function(bU,bV,bW){_7.IterSelector(bU,bV,function(bX){if(bX.closest("[ws-preserve]")==null)bW(bX);});};C.PrepareSingleTemplate=function(bU,bV,bW){var bX;bX=C.FakeRootSingle(bW);return function(bY){C.PrepareTemplateStrict(bU,bV,bX,bY);};};C.TextHoleRE=function(){X.$cctor();return X.TextHoleRE;};D=g.Doc=bQ.Class({},f,D);D.RunById=function(bU,bV){var bW;bW=self.document.getElementById(bU);if(q.Equals(bW,null))i.FailWith("invalid id: "+bU);else D.Run(bW,bV);};D.Convert=function(bU,bV){return D.Flatten(J.MapSeqCached(bU,bV));};D.Run=function(bU,bV){Z.LinkElement(bU,bV.docNode);D.RunInPlace(false,bU,bV);};D.Flatten=function(bU){return D.EmbedView(J.Map(D.Concat,bU));};D.get_Empty=function(){return D.Mk(null,J.Const());};D.RunInPlace=function(bU,bV,bW){var bX;bX=Z.CreateRunState(bV,bW.docNode);J.Sink(_9.get_UseAnimations()||_.BatchUpdatesEnabled()?$.StartProcessor(Z.PerformAnimatedUpdate(bU,bX,bW.docNode)):function(){Z.PerformSyncUpdate(bU,bX,bW.docNode);},bW.updates);};D.Concat=function(bU){var bV;bV=bc.ofSeqNonCopying(bU);return bc.TreeReduce(D.get_Empty(),D.Append,bV);};D.EmbedView=function(bU){var bV;bV=Z.CreateEmbedNode();return D.Mk({$:2,$0:bV},J.Map(a.ignore,J.Bind(function(bW){Z.UpdateEmbedNode(bV,bW.docNode);return bW.updates;},bU)));};D.Mk=function(bU,bV){return new D.New(bU,bV);};D.Append=function(bU,bV){return D.Mk({$:0,$0:bU.docNode,$1:bV.docNode},J.Map2Unit(bU.updates,bV.updates));};D.TextNode=function(bU){return D.Mk({$:5,$0:self.document.createTextNode(bU)},J.Const());};D.TextView=function(bU){var bV;bV=Z.CreateTextNode();return D.Mk({$:4,$0:bV},J.Map(function(bW){Z.UpdateTextNode(bV,bW);},bU));};D.New=bQ.Ctor(function(bU,bV){f.New.call(this);this.docNode=bU;this.updates=bV;},D);F.NewFromSeq=function(bU){var bV,bW,bX;bV={};bW=V.Get(bU);try{while(bW.MoveNext()){bX=bW.Current();bV[bX[0]]=bX[1];}}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}return bV;};H.Int=function(){H.set_counter(H.counter()+1);return H.counter();};H.set_counter=function(bU){_0.$cctor();_0.counter=bU;};H.counter=function(){_0.$cctor();return _0.counter;};I=y.Dictionary=bQ.Class({set_Item:function(bU,bV){this.set(bU,bV);},set:function(bU,bV){var bW,bX,bY,bZ;bW=this;bX=this.hash(bU);bY=this.data[bX];if(bY==null){this.count=this.count+1;this.data[bX]=new a.Array({K:bU,V:bV});}else{bZ=n.tryFindIndex(function(b0){return bW.equals.apply(null,[(i.KeyValue(b0))[0],bU]);},bY);bZ==null?(this.count=this.count+1,bY.push({K:bU,V:bV})):bY[bZ.$0]={K:bU,V:bV};}},TryGetValue:function(bU,bV){var bW,bX,bY;bW=this;bX=this.data[this.hash(bU)];return bX==null?false:(bY=n.tryPick(function(bZ){var b0;b0=i.KeyValue(bZ);return bW.equals.apply(null,[b0[0],bU])?{$:1,$0:b0[1]}:null;},bX),bY!=null&&bY.$==1&&(bV.set(bY.$0),true));},Remove:function(bU){return this.remove(bU);},ContainsKey:function(bU){var bV,bW;bV=this;bW=this.data[this.hash(bU)];return bW==null?false:n.exists(function(bX){return bV.equals.apply(null,[(i.KeyValue(bX))[0],bU]);},bW);},get_Keys:function(){return new _8.New(this);},get_Values:function(){return new bk.New(this);},remove:function(bU){var bV,bW,bX,bY;bV=this;bW=this.hash(bU);bX=this.data[bW];return bX==null?false:(bY=n.filter(function(bZ){return!bV.equals.apply(null,[(i.KeyValue(bZ))[0],bU]);},bX),n.length(bY)<bX.length&&(this.count=this.count-1,this.data[bW]=bY,true));},get_Item:function(bU){return this.get(bU);},get:function(bU){var bV,bW;bV=this;bW=this.data[this.hash(bU)];return bW==null?U.notPresent():n.pick(function(bX){var bY;bY=i.KeyValue(bX);return bV.equals.apply(null,[bY[0],bU])?{$:1,$0:bY[1]}:null;},bW);},GetEnumerator:function(){return V.Get0(this);},GetEnumerator0:function(){return V.Get0(n.concat(T.GetFieldValues(this.data)));}},f,I);I.New$5=bQ.Ctor(function(){I.New$6.call(this,[],q.Equals,q.Hash);},I);I.New$6=bQ.Ctor(function(bU,bV,bW){var bX,bY;f.New.call(this);this.equals=bV;this.hash=bW;this.count=0;this.data=[];bX=V.Get(bU);try{while(bX.MoveNext()){bY=bX.Current();this.set(bY.K,bY.V);}}finally{if(typeof bX=="object"&&"Dispose"in bX)bX.Dispose();}},I);J=g.View=bQ.Class({},null,J);v.Obsolete=function(bU){var bV,bW,bX,bY,bZ;bW=bU.s;if(bW==null||(bW!=null&&bW.$==2?(bV=bW.$1,false):bW!=null&&bW.$==3?(bV=bW.$1,false):true))void 0;else{bU.s=null;for(bX=0,bY=n.length(bV)-1;bX<=bY;bX++){bZ=n.get(bV,bX);if(typeof bZ=="object")(function(b0){v.Obsolete(b0);}(bZ));else bZ();}}};v.New=function(bU){return{s:bU};};p.FromSeq=function(bU){return p.Create(a.id,bU);};p.Create=function(bU,bV){return p.CreateWithStorage(bU,_3.InMemory(n.ofSeq(bV)));};p.CreateWithStorage=function(bU,bV){return new p.New(bU,bV);};L=g.AttrProxy=bQ.Class({},null,L);L.Handler=function(bU,bV){return L.HandlerImpl(bU,bV);};L.Concat=function(bU){var bV;bV=bc.ofSeqNonCopying(bU);return bc.TreeReduce(be.EmptyAttr(),L.Append,bV);};L.Create=function(bU,bV){return be.Static(function(bW){bW.setAttribute(bU,bV);});};L.HandlerImpl=function(bU,bV){return be.Static(function(bW){bW.addEventListener(bU,function(bX){return(bV(bW))(bX);},false);});};L.Append=function(bU,bV){return be.AppendTree(bU,bV);};M=g.CheckedInput=bQ.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,M);N.TryParseInt32=function(bU,bV){return N.TryParse(bU,-2147483648,2147483647,bV);};O=y.HashSet=bQ.Class({Add:function(bU){return this.add(bU);},Contains:function(bU){var bV;bV=this.data[this.hash(bU)];return bV==null?false:this.arrContains(bU,bV);},add:function(bU){var bV,bW;bV=this.hash(bU);bW=this.data[bV];return bW==null?(this.data[bV]=[bU],this.count=this.count+1,true):this.arrContains(bU,bW)?false:(bW.push(bU),this.count=this.count+1,true);},arrContains:function(bU,bV){var bW,bX,bY,bZ;bW=true;bX=0;bZ=bV.length;while(bW&&bX<bZ)if(this.equals.apply(null,[bV[bX],bU]))bW=false;else bX=bX+1;return!bW;},ExceptWith:function(bU){var bV;bV=V.Get(bU);try{while(bV.MoveNext())this.Remove(bV.Current());}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bU){var bV,bW,bX,bY;bV=0;bW=br.concat(this.data);for(bX=0,bY=bW.length-1;bX<=bY;bX++)n.set(bU,bX,bW[bX]);},IntersectWith:function(bU){var bV,bW,bX,bY,bZ;bV=new O.New$4(bU,this.equals,this.hash);bW=br.concat(this.data);for(bX=0,bY=bW.length-1;bX<=bY;bX++){bZ=bW[bX];if(!bV.Contains(bZ))this.Remove(bZ);}},Remove:function(bU){var bV;bV=this.data[this.hash(bU)];return bV==null?false:this.arrRemove(bU,bV)&&(this.count=this.count-1,true);},arrRemove:function(bU,bV){var bW,bX,bY,bZ;bW=true;bX=0;bZ=bV.length;while(bW&&bX<bZ)if(this.equals.apply(null,[bV[bX],bU])){bV.splice.apply(bV,[bX,1]);bW=false;}else bX=bX+1;return!bW;},GetEnumerator:function(){return V.Get(br.concat(this.data));},GetEnumerator0:function(){return V.Get(br.concat(this.data));}},f,O);O.New$3=bQ.Ctor(function(){O.New$4.call(this,[],q.Equals,q.Hash);},O);O.New$4=bQ.Ctor(function(bU,bV,bW){var bX;f.New.call(this);this.equals=bV;this.hash=bW;this.data=[];this.count=0;bX=V.Get(bU);try{while(bX.MoveNext())this.add(bX.Current());}finally{if(typeof bX=="object"&&"Dispose"in bX)bX.Dispose();}},O);O.New$2=bQ.Ctor(function(bU){O.New$4.call(this,bU,q.Equals,q.Hash);},O);P.append=function(bU,bV){return{GetEnumerator:function(){var bW,bX;bW=V.Get(bU);bX=[true];return new W.New(bW,null,function(bY){var bZ;return bY.s.MoveNext()?(bY.c=bY.s.Current(),true):(bZ=bY.s,!q.Equals(bZ,null)?bZ.Dispose():void 0,bY.s=null,bX[0]&&(bX[0]=false,bY.s=V.Get(bV),bY.s.MoveNext()?(bY.c=bY.s.Current(),true):(bY.s.Dispose(),bY.s=null,false)));},function(bY){var bZ;bZ=bY.s;if(!q.Equals(bZ,null))bZ.Dispose();});}};};P.head=function(bU){var bV;bV=V.Get(bU);try{return bV.MoveNext()?bV.Current():P.insufficient();}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}};P.fold=function(bU,bV,bW){var bX,bY;bX=bV;bY=V.Get(bW);try{while(bY.MoveNext())bX=bU(bX,bY.Current());return bX;}finally{if(typeof bY=="object"&&"Dispose"in bY)bY.Dispose();}};P.distinctBy=function(bU,bV){return{GetEnumerator:function(){var bW,bX;bW=V.Get(bV);bX=new O.New$3();return new W.New(null,null,function(bY){var bZ,b0;if(bW.MoveNext()){bZ=bW.Current();b0=bX.Add(bU(bZ));while(!b0&&bW.MoveNext()){bZ=bW.Current();b0=bX.Add(bU(bZ));}return b0&&(bY.c=bZ,true);}else return false;},function(){bW.Dispose();});}};};P.iter=function(bU,bV){var bW;bW=V.Get(bV);try{while(bW.MoveNext())bU(bW.Current());}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}};P.map=function(bU,bV){return{GetEnumerator:function(){var bW;bW=V.Get(bV);return new W.New(null,null,function(bX){return bW.MoveNext()&&(bX.c=bU(bW.Current()),true);},function(){bW.Dispose();});}};};P.max=function(bU){var bV,bW,bX;bV=V.Get(bU);try{if(!bV.MoveNext())P.seqEmpty();bW=bV.Current();while(bV.MoveNext()){bX=bV.Current();if(q.Compare(bX,bW)===1)bW=bX;}return bW;}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}};P.seqEmpty=function(){return i.FailWith("The input sequence was empty.");};P.forall=function(bU,bV){return!P.exists(function(bW){return!bU(bW);},bV);};P.exists=function(bU,bV){var bW,bX;bW=V.Get(bV);try{bX=false;while(!bX&&bW.MoveNext())bX=bU(bW.Current());return bX;}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}};n.choose=function(bU,bV){var bW,bX,bY,bZ;bW=[];for(bX=0,bY=bV.length-1;bX<=bY;bX++){bZ=bU(bV[bX]);if(bZ==null);else bW.push(bZ.$0);}return bW;};n.tryFindIndex=function(bU,bV){var bW,bX;bW=null;bX=0;while(bX<bV.length&&bW==null){bU(bV[bX])?bW={$:1,$0:bX}:void 0;bX=bX+1;}return bW;};n.tryPick=function(bU,bV){var bW,bX,bY;bW=null;bX=0;while(bX<bV.length&&bW==null){bY=bU(bV[bX]);if(bY!=null&&bY.$==1)bW=bY;bX=bX+1;}return bW;};n.exists=function(bU,bV){var bW,bX,bY,bZ;bW=false;bX=0;bZ=n.length(bV);while(!bW&&bX<bZ)if(bU(bV[bX]))bW=true;else bX=bX+1;return bW;};n.concat=function(bU){return a.Array.prototype.concat.apply([],n.ofSeq(bU));};n.ofSeq=function(bU){var bV,bW;if(bU instanceof a.Array)return bU.slice();else if(bU instanceof bh)return n.ofList(bU);else{bV=[];bW=V.Get(bU);try{while(bW.MoveNext())bV.push(bW.Current());return bV;}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}}};n.foldBack=function(bU,bV,bW){var bX,bY,bZ,b0,b1;bX=bW;bZ=bV.length;for(b0=1,b1=bZ;b0<=b1;b0++)bX=bU(bV[bZ-b0],bX);return bX;};n.iter=function(bU,bV){var bW,bX;for(bW=0,bX=bV.length-1;bW<=bX;bW++)bU(bV[bW]);};n.map=function(bU,bV){var bW,bX,bY;bW=new a.Array(bV.length);for(bX=0,bY=bV.length-1;bX<=bY;bX++)bW[bX]=bU(bV[bX]);return bW;};n.filter=function(bU,bV){var bW,bX,bY;bW=[];for(bX=0,bY=bV.length-1;bX<=bY;bX++)if(bU(bV[bX]))bW.push(bV[bX]);return bW;};n.ofList=function(bU){var bV,bW;bW=[];bV=bU;while(!(bV.$==0)){bW.push(bg.head(bV));bV=bg.tail(bV);}return bW;};n.pick=function(bU,bV){var bW;bW=n.tryPick(bU,bV);return bW==null?i.FailWith("KeyNotFoundException"):bW.$0;};n.forall=function(bU,bV){var bW,bX,bY,bZ;bW=true;bX=0;bZ=n.length(bV);while(bW&&bX<bZ)if(bU(bV[bX]))bX=bX+1;else bW=false;return bW;};n.create=function(bU,bV){var bW,bX,bY;bW=new a.Array(bU);for(bX=0,bY=bU-1;bX<=bY;bX++)bW[bX]=bV;return bW;};n.init=function(bU,bV){var bW,bX,bY;if(bU<0)i.FailWith("Negative size given.");else null;bW=new a.Array(bU);for(bX=0,bY=bU-1;bX<=bY;bX++)bW[bX]=bV(bX);return bW;};Q.$cctor=function(){Q.$cctor=a.ignore;Q.initialized=new I.New$5();};Q=l.TemplateInitializer=bQ.Class({},f,Q);Q.GetOrAddHoleFor=function(bU,bV,bW){var bX,bY,bZ,b0;Q.$cctor();bX=Q.GetHolesFor(bU);bY=(bZ=null,[bX.TryGetValue(bV,{get:function(){return bZ;},set:function(b1){bZ=b1;}}),bZ]);return bY[0]?bY[1]:(b0=bW(),(bX.set_Item(bV,b0),b0));};Q.GetHolesFor=function(bU){var bV,bW,bX;Q.$cctor();bV=(bW=null,[Q.initialized.TryGetValue(bU,{get:function(){return bW;},set:function(bY){bW=bY;}}),bW]);return bV[0]?bV[1]:(bX=new I.New$5(),(Q.initialized.set_Item(bU,bX),bX));};T.GetFieldValues=function(bU){var bV,bW;bV=[];for(var bX in bU)bV.push(bU[bX]);return bV;};J.MapSeqCached=function(bU,bV){return J.MapSeqCachedBy(a.id,bU,bV);};J.MapSeqCachedBy=function(bU,bV,bW){var bX;bX=[new I.New$5()];return J.Map(function(bY){var bZ,b0,b1;bZ=bX[0];b0=new I.New$5();b1=bc.mapInPlace(function(b2){var b3,b4;b3=bU(b2);b4=bZ.ContainsKey(b3)?bZ.get_Item(b3):bV(b2);b0.set_Item(b3,b4);return b4;},n.ofSeq(bY));bX[0]=b0;return b1;},bW);};J.Map=function(bU,bV){return J.CreateLazy(function(){return v.Map(bU,bV());});};J.Const=function(bU){var bV;bV=v.New({$:0,$0:bU});return function(){return bV;};};J.Sink=function(bU,bV){function bW(){v.WhenRun(bV(),bU,function(){bo.scheduler().Fork(bW);});}bo.scheduler().Fork(bW);};J.CreateLazy=function(bU){var bV;bV={c:null,o:bU};return function(){var bW,bX;bW=bV.c;return bW===null?(bW=bV.o(),bV.c=bW,(bX=bW.s,bX!=null&&bX.$==0)?bV.o=null:v.WhenObsoleteRun(bW,function(){bV.c=null;}),bW):bW;};};J.Bind=function(bU,bV){return J.Join(J.Map(bU,bV));};J.Map3=function(bU,bV,bW,bX){return J.CreateLazy(function(){return v.Map3(bU,bV(),bW(),bX());});};J.Sequence=function(bU){return J.CreateLazy(function(){return v.Sequence(P.map(function(bV){return bV();},bU));});};J.Map2=function(bU,bV,bW){return J.CreateLazy(function(){return v.Map2(bU,bV(),bW());});};J.Map2Unit=function(bU,bV){return J.CreateLazy(function(){return v.Map2Unit(bU(),bV());});};J.Join=function(bU){return J.CreateLazy(function(){return v.Join(bU());});};U.notPresent=function(){return i.FailWith("The given key was not present in the dictionary.");};V.Get=function(bU){return bU instanceof a.Array?V.ArrayEnumerator(bU):q.Equals(typeof bU,"string")?V.StringEnumerator(bU):bU.GetEnumerator();};V.ArrayEnumerator=function(bU){return new W.New(0,null,function(bV){var bW;bW=bV.s;return bW<n.length(bU)&&(bV.c=n.get(bU,bW),bV.s=bW+1,true);},void 0);};V.StringEnumerator=function(bU){return new W.New(0,null,function(bV){var bW;bW=bV.s;return bW<bU.length&&(bV.c=bU[bW],bV.s=bW+1,true);},void 0);};V.Get0=function(bU){return bU instanceof a.Array?V.ArrayEnumerator(bU):q.Equals(typeof bU,"string")?V.StringEnumerator(bU):"GetEnumerator0"in bU?bU.GetEnumerator0():bU.GetEnumerator();};W=V.T=bQ.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},f,W);W.New=bQ.Ctor(function(bU,bV,bW,bX){f.New.call(this);this.s=bU;this.c=bV;this.n=bW;this.d=bX;},W);X.$cctor=function(){X.$cctor=a.ignore;X.LoadedTemplates=new I.New$5();X.LocalTemplatesLoaded=false;X.GlobalHoles=new I.New$5();X.TextHoleRE="\\${([^}]+)}";X.RenderedFullDocTemplate=null;};Z.LinkElement=function(bU,bV){Z.InsertDoc(bU,bV,null);};Z.InsertDoc=function(bU,bV,bW){var bX,bY,bZ;while(true)if(bV!=null&&bV.$==1)return Z.InsertNode(bU,bV.$0.El,bW);else if(bV!=null&&bV.$==2){bX=bV.$0;bX.Dirty=false;bV=bX.Current;}else if(bV==null)return bW;else if(bV!=null&&bV.$==4)return Z.InsertNode(bU,bV.$0.Text,bW);else if(bV!=null&&bV.$==5)return Z.InsertNode(bU,bV.$0,bW);else if(bV!=null&&bV.$==6)return n.foldBack(function(b0,b1){return(((bQ.Curried3(function(b2,b3,b4){return b3==null||b3.constructor===K?Z.InsertDoc(b2,b3,b4):Z.InsertNode(b2,b3,b4);}))(bU))(b0))(b1);},bV.$0.Els,bW);else{bY=bV.$1;bZ=bV.$0;bV=bZ;bW=Z.InsertDoc(bU,bY,bW);}};Z.CreateRunState=function(bU,bV){return bm.New(bn.get_Empty(),Z.CreateElemNode(bU,be.EmptyAttr(),bV));};Z.PerformAnimatedUpdate=function(bU,bV,bW){var bX;return _9.get_UseAnimations()?(bX=null,bo.Delay(function(){var bY,bZ,b0;bY=bn.FindAll(bW);bZ=Z.ComputeChangeAnim(bV,bY);b0=Z.ComputeEnterAnim(bV,bY);return bo.Bind(_9.Play(_9.Append(bZ,Z.ComputeExitAnim(bV,bY))),function(){return bo.Bind(Z.SyncElemNodesNextFrame(bU,bV),function(){return bo.Bind(_9.Play(b0),function(){bV.PreviousNodes=bY;return bo.Return(null);});});});})):Z.SyncElemNodesNextFrame(bU,bV);};Z.PerformSyncUpdate=function(bU,bV,bW){var bX;bX=bn.FindAll(bW);Z.SyncElemNode(bU,bV.Top);bV.PreviousNodes=bX;};Z.CreateEmbedNode=function(){return{Current:null,Dirty:false};};Z.UpdateEmbedNode=function(bU,bV){bU.Current=bV;bU.Dirty=true;};Z.InsertBeforeDelim=function(bU,bV){var bW,bX;bW=bU.parentNode;bX=self.document.createTextNode("");bW.insertBefore(bX,bU);Z.LinkPrevElement(bU,bV);return bX;};Z.InsertNode=function(bU,bV,bW){_7.InsertAt(bU,bW,bV);return bV;};Z.CreateElemNode=function(bU,bV,bW){var bX;Z.LinkElement(bU,bW);bX=be.Insert(bU,bV);return _1.New(bX,bW,null,bU,H.Int(),bQ.GetOptional(bX.OnAfterRender));};Z.SyncElemNodesNextFrame=function(bU,bV){function bW(bX){a.requestAnimationFrame(function(){Z.SyncElemNode(bU,bV.Top);bX();});}return _.BatchUpdatesEnabled()?bo.FromContinuations(function(bX,bY,bZ){return bW.apply(null,[bX,bY,bZ]);}):(Z.SyncElemNode(bU,bV.Top),bo.Return(null));};Z.ComputeExitAnim=function(bU,bV){return _9.Concat(n.map(function(bW){return be.GetExitAnim(bW.Attr);},bn.ToArray(bn.Except(bV,bn.Filter(function(bW){return be.HasExitAnim(bW.Attr);},bU.PreviousNodes)))));};Z.ComputeEnterAnim=function(bU,bV){return _9.Concat(n.map(function(bW){return be.GetEnterAnim(bW.Attr);},bn.ToArray(bn.Except(bU.PreviousNodes,bn.Filter(function(bW){return be.HasEnterAnim(bW.Attr);},bV)))));};Z.ComputeChangeAnim=function(bU,bV){var bW;function bX(bY){return be.HasChangeAnim(bY.Attr);}bW=function(bY){return bn.Filter(bX,bY);};return _9.Concat(n.map(function(bY){return be.GetChangeAnim(bY.Attr);},bn.ToArray(bn.Intersect(bW(bU.PreviousNodes),bW(bV)))));};Z.SyncElemNode=function(bU,bV){!bU?Z.SyncElement(bV):void 0;Z.Sync(bV.Children);Z.AfterRender(bV);};Z.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};Z.UpdateTextNode=function(bU,bV){bU.Value=bV;bU.Dirty=true;};Z.LinkPrevElement=function(bU,bV){Z.InsertDoc(bU.parentNode,bV,bU);};Z.SyncElement=function(bU){function bV(bW){function bX(bY){var bZ,b0,b1,b2;while(true){if(bY!=null&&bY.$==0){b0=bY.$1;b1=bY.$0;if(bX(b1))return true;else bY=b0;}else if(bY!=null&&bY.$==2){b2=bY.$0;if(b2.Dirty)return true;else bY=b2.Current;}else return bY!=null&&bY.$==6&&(bZ=bY.$0,bZ.Dirty||n.exists(bV,bZ.Holes));}}return bX(bW.Children);}be.Sync(bU.El,bU.Attr);if(bV(bU))Z.DoSyncElement(bU);};Z.Sync=function(bU){var bV,bW,bX,bY,bZ;while(true){if(bU!=null&&bU.$==1)return Z.SyncElemNode(false,bU.$0);else if(bU!=null&&bU.$==2){bX=bU.$0;bU=bX.Current;}else if(bU==null)return null;else if(bU!=null&&bU.$==5)return null;else if(bU!=null&&bU.$==4){bV=bU.$0;return bV.Dirty?(bV.Text.nodeValue=bV.Value,bV.Dirty=false):null;}else if(bU!=null&&bU.$==6){bW=bU.$0;n.iter(function(b0){return function(b1){Z.SyncElemNode(b0,b1);};}(false),bW.Holes);n.iter(function(b0){be.Sync(b0[0],b0[1]);},bW.Attrs);return Z.AfterRender(bW);}else{bY=bU.$1;bZ=bU.$0;Z.Sync(bZ);bU=bY;}}};Z.AfterRender=function(bU){var bV;bV=bQ.GetOptional(bU.Render);if(bV!=null&&bV.$==1){bV.$0(bU.El);bQ.SetOptional(bU,"Render",null);}};Z.DoSyncElement=function(bU){var bV,bW,bX;function bY(bZ,b0){var b1,b2,b3,b4;while(true){if(bZ!=null&&bZ.$==1)return bZ.$0.El;else if(bZ!=null&&bZ.$==2){b2=bZ.$0;if(b2.Dirty){b2.Dirty=false;return Z.InsertDoc(bV,b2.Current,b0);}else bZ=b2.Current;}else if(bZ==null)return b0;else if(bZ!=null&&bZ.$==4)return bZ.$0.Text;else if(bZ!=null&&bZ.$==5)return bZ.$0;else if(bZ!=null&&bZ.$==6){b1=bZ.$0;b1.Dirty?b1.Dirty=false:void 0;return n.foldBack(function(b5,b6){return b5==null||b5.constructor===K?bY(b5,b6):b5;},b1.Els,b0);}else{b3=bZ.$1;b4=bZ.$0;bZ=b4;b0=bY(b3,b0);}}}bV=bU.El;bG.Iter((bW=bU.El,function(bZ){_7.RemoveNode(bW,bZ);}),bG.Except(bG.DocChildren(bU),bG.Children(bU.El,bQ.GetOptional(bU.Delimiters))));bY(bU.Children,(bX=bQ.GetOptional(bU.Delimiters),bX!=null&&bX.$==1?bX.$0[1]:null));};_0.$cctor=function(){_0.$cctor=a.ignore;_0.counter=0;};_1=g.DocElemNode=bQ.Class({Equals:function(bU){return this.ElKey===bU.ElKey;},GetHashCode:function(){return this.ElKey;}},null,_1);_1.New=function(bU,bV,bW,bX,bY,bZ){var b0;return new _1((b0={Attr:bU,Children:bV,El:bX,ElKey:bY},(bQ.SetOptional(b0,"Delimiters",bW),bQ.SetOptional(b0,"Render",bZ),b0)));};_3.InMemory=function(bU){return new bd.New(bU);};_4=g.Elt=bQ.Class({},D,_4);_4.TreeNode=function(bU,bV){var bW,bX;function bY(bZ){return bZ[1];}bW=bj.Create(bV);return new _4.New$1({$:6,$0:bU},J.Map2Unit((bX=n.map(function(bZ){return be.Updates(bY(bZ));},bU.Attrs),bc.TreeReduce(J.Const(),J.Map2Unit,bX)),bW.v),n.get(bU.Els,0),bW);};_4.New$1=bQ.Ctor(function(bU,bV,bW,bX){D.New.call(this,bU,bV);this.docNode$1=bU;this.updates$1=bV;this.elt=bW;this.rvUpdates=bX;},_4);_5.convertTextNode=function(bU){var bV,bW,bX,bY,bZ,b0;bV=null;bW=0;bY=bU.textContent;bZ=new a.RegExp(C.TextHoleRE(),"g");while(bV=bZ.exec(bY),bV!==null){bU.parentNode.insertBefore(self.document.createTextNode(_6.string(bY,{$:1,$0:bW},{$:1,$0:bZ.lastIndex-n.get(bV,0).length-1})),bU);bW=bZ.lastIndex;b0=self.document.createElement("span");b0.setAttribute("ws-replace",n.get(bV,1).toLowerCase());bU.parentNode.insertBefore(b0,bU);}bZ.lastIndex=0;bU.textContent=_6.string(bY,{$:1,$0:bW},null);};_5.failNotLoaded=function(bU){bR.warn("Instantiating non-loaded template",bU);};_5.fillTextHole=function(bU,bV,bW){var bX;bX=bU.querySelector("[ws-replace]");return q.Equals(bX,null)?(bR.warn("Filling non-existent text hole",bW),null):(bX.parentNode.replaceChild(self.document.createTextNode(bV),bX),{$:1,$0:bX.getAttribute("ws-replace")});};_5.removeHolesExcept=function(bU,bV){function bW(bX){C.foreachNotPreserved(bU,"["+bX+"]",function(bY){if(!bV.Contains(bY.getAttribute(bX)))bY.removeAttribute(bX);});}bW("ws-attr");bW("ws-onafterrender");bW("ws-var");C.foreachNotPreserved(bU,"[ws-hole]",function(bX){if(!bV.Contains(bX.getAttribute("ws-hole"))){bX.removeAttribute("ws-hole");while(bX.hasChildNodes())bX.removeChild(bX.lastChild);}});C.foreachNotPreserved(bU,"[ws-replace]",function(bX){if(!bV.Contains(bX.getAttribute("ws-replace")))bX.parentNode.removeChild(bX);});C.foreachNotPreserved(bU,"[ws-on]",function(bX){bX.setAttribute("ws-on",bi.concat(" ",n.filter(function(bY){return bV.Contains(n.get(bi.SplitChars(bY,[":"],1),1));},bi.SplitChars(bX.getAttribute("ws-on"),[" "],1))));});C.foreachNotPreserved(bU,"[ws-attr-holes]",function(bX){var bY,bZ,b0,b1,b2;bY=bi.SplitChars(bX.getAttribute("ws-attr-holes"),[" "],1);for(bZ=0,b0=bY.length-1;bZ<=b0;bZ++){b1=n.get(bY,bZ);bX.setAttribute(b1,(b2=new a.RegExp(C.TextHoleRE(),"g"),bX.getAttribute(b1).replace(b2,function(b3,b4){return bV.Contains(b4)?b3:"";})));}});};_5.fillInstanceAttrs=function(bU,bV){var bW,bX,bY,bZ,b0;_5.convertAttrs(bV);bW=bV.nodeName.toLowerCase();bX=bU.querySelector("[ws-attr="+bW+"]");if(q.Equals(bX,null))bR.warn("Filling non-existent attr hole",bW);else{bX.removeAttribute("ws-attr");for(bY=0,bZ=bV.attributes.length-1;bY<=bZ;bY++){b0=bV.attributes.item(bY);if(b0.name==="class"&&bX.hasAttribute("class"))bX.setAttribute("class",bX.getAttribute("class")+" "+b0.nodeValue);else bX.setAttribute(b0.name,b0.nodeValue);}}};_5.mapHoles=function(bU,bV){function bW(bX){C.foreachNotPreserved(bU,"["+bX+"]",function(bY){var bZ,b0;bZ=(b0=null,[bV.TryGetValue(bY.getAttribute(bX).toLowerCase(),{get:function(){return b0;},set:function(b1){b0=b1;}}),b0]);if(bZ[0])bY.setAttribute(bX,bZ[1]);});}bW("ws-hole");bW("ws-replace");bW("ws-attr");bW("ws-onafterrender");bW("ws-var");C.foreachNotPreserved(bU,"[ws-on]",function(bX){bX.setAttribute("ws-on",bi.concat(" ",n.map(function(bY){var bZ,b0,b1;bZ=bi.SplitChars(bY,[":"],1);b0=(b1=null,[bV.TryGetValue(n.get(bZ,1),{get:function(){return b1;},set:function(b2){b1=b2;}}),b1]);return b0[0]?n.get(bZ,0)+":"+b0[1]:bY;},bi.SplitChars(bX.getAttribute("ws-on"),[" "],1))));});C.foreachNotPreserved(bU,"[ws-attr-holes]",function(bX){var bY,bZ,b0;bY=bi.SplitChars(bX.getAttribute("ws-attr-holes"),[" "],1);for(bZ=0,b0=bY.length-1;bZ<=b0;bZ++)(function(){var b1;function b2(b3,b4){var b5;b5=i.KeyValue(b4);return b3.replace(new a.RegExp("\\${"+b5[0]+"}","ig"),"${"+b5[1]+"}");}b1=n.get(bY,bZ);return bX.setAttribute(b1,(((bQ.Curried3(P.fold))(b2))(bX.getAttribute(b1)))(bV));}());});};_5.fill=function(bU,bV,bW){while(true)if(bU.hasChildNodes())bW=bV.insertBefore(bU.lastChild,bW);else return null;};_5.convertAttrs=function(bU){var bW,bX,bY,bZ,b0,b1,b2,b3;function bV(b4){var b5;b5=bU.getAttribute(b4);if(b5===null);else bU.setAttribute(b4,b5.toLowerCase());}bW=bU.attributes;bX=[];bY=[];bZ=[];for(b0=0,b1=bW.length-1;b0<=b1;b0++){b2=bW.item(b0);if(bi.StartsWith(b2.nodeName,"ws-on")&&b2.nodeName!=="ws-onafterrender"&&b2.nodeName!=="ws-on"){bX.push(b2.nodeName);bY.push(_6.string(b2.nodeName,{$:1,$0:"ws-on".length},null)+":"+b2.nodeValue.toLowerCase());}else!bi.StartsWith(b2.nodeName,"ws-")&&(new a.RegExp(C.TextHoleRE())).test(b2.nodeValue)?(b2.nodeValue=(b3=new a.RegExp(C.TextHoleRE(),"g"),b2.nodeValue.replace(b3,function(b4,b5){return"${"+b5.toLowerCase()+"}";})),bZ.push(b2.nodeName)):void 0;}if(!(bY.length==0))bU.setAttribute("ws-on",bi.concat(" ",bY));if(!(bZ.length==0))bU.setAttribute("ws-attr-holes",bi.concat(" ",bZ));bV("ws-hole");bV("ws-replace");bV("ws-attr");bV("ws-onafterrender");bV("ws-var");n.iter(function(b4){bU.removeAttribute(b4);},bX);};_6.string=function(bU,bV,bW){return bV==null?bW!=null&&bW.$==1?bU.slice(0,bW.$0+1):"":bW==null?bU.slice(bV.$0):bU.slice(bV.$0,bW.$0+1);};_7.ParseHTMLIntoFakeRoot=function(bU){var bV,bW,bX,bY,bZ;function b0(b1,b2){var b3;while(true)if(b2===0)return b1;else{b3=b2;b1=b1.lastChild;b2=b3-1;}}bV=self.document.createElement("div");return!_7.rhtml().test(bU)?(bV.appendChild(self.document.createTextNode(bU)),bV):(bW=(bX=_7.rtagName().exec(bU),q.Equals(bX,null)?"":n.get(bX,1).toLowerCase()),(bY=(bZ=(_7.wrapMap())[bW],bZ?bZ:_7.defaultWrap()),(bV.innerHTML=bY[1]+bU.replace(_7.rxhtmlTag(),"<$1></$2>")+bY[2],b0(bV,bY[0]))));};_7.ChildrenArray=function(bU){var bV,bW,bX;bV=[];for(bW=0,bX=bU.childNodes.length-1;bW<=bX;bW++)bV.push(bU.childNodes[bW]);return bV;};_7.rhtml=function(){bt.$cctor();return bt.rhtml;};_7.wrapMap=function(){bt.$cctor();return bt.wrapMap;};_7.defaultWrap=function(){bt.$cctor();return bt.defaultWrap;};_7.rxhtmlTag=function(){bt.$cctor();return bt.rxhtmlTag;};_7.rtagName=function(){bt.$cctor();return bt.rtagName;};_7.IterSelector=function(bU,bV,bW){var bX,bY,bZ;bX=bU.querySelectorAll(bV);for(bY=0,bZ=bX.length-1;bY<=bZ;bY++)bW(bX[bY]);};_7.InsertAt=function(bU,bV,bW){var bX;if(!(bW.parentNode===bU&&bV===(bX=bW.nextSibling,q.Equals(bX,null)?null:bX)))bU.insertBefore(bW,bV);};_7.RemoveNode=function(bU,bV){if(bV.parentNode===bU)bU.removeChild(bV);};P.insufficient=function(){return i.FailWith("The input sequence has an insufficient number of elements.");};_8=y.KeyCollection=bQ.Class({GetEnumerator$1:function(){return V.Get(P.map(function(bU){return bU.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},f,_8);_8.New=bQ.Ctor(function(bU){f.New.call(this);this.d=bU;},_8);_9.get_UseAnimations=function(){return bp.UseAnimations();};_9.Play=function(bU){var bV;bV=null;return bo.Delay(function(){return bo.Bind(_9.Run(a.ignore,bp.Actions(bU)),function(){bp.Finalize(bU);return bo.Return(null);});});};_9.Append=function(bU,bV){return{$:0,$0:bv.Append(bU.$0,bV.$0)};};_9.Run=function(bU,bV){var bW;function bX(bY){function bZ(b0){return function(b1){var b2;b2=b1-b0;bV.Compute(b2);bU();return b2<=bW?void a.requestAnimationFrame(function(b3){(bZ(b0))(b3);}):bY();};}a.requestAnimationFrame(function(b0){(bZ(b0))(b0);});}bW=bV.Duration;return bW===0?bo.Zero():bo.FromContinuations(function(bY,bZ,b0){return bX.apply(null,[bY,bZ,b0]);});};_9.Concat=function(bU){return{$:0,$0:bv.Concat(P.map(bp.List,bU))};};_9.get_Empty=function(){return{$:0,$0:bv.Empty()};};_.BatchUpdatesEnabled=function(){bq.$cctor();return bq.BatchUpdatesEnabled;};$.StartProcessor=function(bU){var bV;function bW(){var bX;bX=null;return bo.Delay(function(){return bo.Bind(bU,function(){var bY;bY=bV[0];return bY===1?(bV[0]=0,bo.Zero()):bY===2?(bV[0]=1,bW()):bo.Zero();});});}bV=[0];return function(){var bX;bX=bV[0];if(bX===0){bV[0]=1;bo.Start(bW(),null);}else bX===1?bV[0]=2:void 0;};};bb.New=function(bU,bV,bW,bX){var bY;bY={DynElem:bU,DynFlags:bV,DynNodes:bW};bQ.SetOptional(bY,"OnAfterRender",bX);return bY;};bc.mapInPlace=function(bU,bV){var bW,bX;for(bW=0,bX=bV.length-1;bW<=bX;bW++)bV[bW]=bU(bV[bW]);return bV;};bc.ofSeqNonCopying=function(bU){var bV,bW;if(bU instanceof a.Array)return bU;else if(bU instanceof bh)return n.ofList(bU);else if(bU===null)return[];else{bV=[];bW=V.Get(bU);try{while(bW.MoveNext())bV.push(bW.Current());return bV;}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}}};bc.TreeReduce=function(bU,bV,bW){var bX;function bY(bZ){return function(b0){var b1,b2;return b0<=0?bU:b0===1&&(bZ>=0&&bZ<bX)?n.get(bW,bZ):(b2=b0/2>>0,bV((bY(bZ))(b2),(bY(bZ+b2))(b0-b2)));};}bX=n.length(bW);return(bY(0))(bX);};bc.MapTreeReduce=function(bU,bV,bW,bX){var bY;function bZ(b0){return function(b1){var b2,b3;return b1<=0?bV:b1===1&&(b0>=0&&b0<bY)?bU(n.get(bX,b0)):(b3=b1/2>>0,bW((bZ(b0))(b3),(bZ(b0+b3))(b1-b3)));};}bY=n.length(bX);return(bZ(0))(bY);};bd=_3.ArrayStorage=bQ.Class({SSetAt:function(bU,bV,bW){n.set(bW,bU,bV);return bW;},SAppend:function(bU,bV){bV.push(bU);return bV;},SInit:function(){return this.init;}},f,bd);bd.New=bQ.Ctor(function(bU){f.New.call(this);this.init=bU;},bd);be.Insert=function(bU,bV){var bW,bX,bY;function bZ(b0){var b1,b2;while(true)if(!(b0===null)){if(b0!=null&&b0.$==1)return bW.push(b0.$0);else if(b0!=null&&b0.$==2){b1=b0.$1;b2=b0.$0;bZ(b2);b0=b1;}else return b0!=null&&b0.$==3?b0.$0(bU):b0!=null&&b0.$==4?bX.push(b0.$0):null;}else return null;}bW=[];bX=[];bZ(bV);bY=bW.slice(0);return bb.New(bU,be.Flags(bV),bY,bX.length===0?null:{$:1,$0:function(b0){P.iter(function(b1){b1(b0);},bX);}});};be.Updates=function(bU){return bc.MapTreeReduce(function(bV){return bV.NChanged();},J.Const(),J.Map2Unit,bU.DynNodes);};be.Empty=function(bU){return bb.New(bU,0,[],null);};be.Flags=function(bU){return bU!==null&&bU.hasOwnProperty("flags")?bU.flags:0;};be.Static=function(bU){return new L({$:3,$0:bU});};be.Dynamic=function(bU,bV){return new L({$:1,$0:new bx.New(bU,bV)});};be.EmptyAttr=function(){bw.$cctor();return bw.EmptyAttr;};be.HasExitAnim=function(bU){var bV;bV=2;return(bU.DynFlags&bV)===bV;};be.GetExitAnim=function(bU){return be.GetAnim(bU,function(bV,bW){return bV.NGetExitAnim(bW);});};be.HasEnterAnim=function(bU){var bV;bV=1;return(bU.DynFlags&bV)===bV;};be.GetEnterAnim=function(bU){return be.GetAnim(bU,function(bV,bW){return bV.NGetEnterAnim(bW);});};be.HasChangeAnim=function(bU){var bV;bV=4;return(bU.DynFlags&bV)===bV;};be.GetChangeAnim=function(bU){return be.GetAnim(bU,function(bV,bW){return bV.NGetChangeAnim(bW);});};be.AppendTree=function(bU,bV){var bW;return bU===null?bV:bV===null?bU:(bW=new L({$:2,$0:bU,$1:bV}),(be.SetFlags(bW,be.Flags(bU)|be.Flags(bV)),bW));};be.GetAnim=function(bU,bV){return _9.Concat(n.map(function(bW){return bV(bW,bU.DynElem);},bU.DynNodes));};be.Sync=function(bU,bV){n.iter(function(bW){bW.NSync(bU);},bV.DynNodes);};be.SetFlags=function(bU,bV){bU.flags=bV;};bf.Handler=function(bU,bV){return be.Static(function(bW){bW.addEventListener(bU,function(bX){return(bV(bW))(bX);},false);});};bf.OnAfterRender=function(bU){return new L({$:4,$0:bU});};bf.Value=function(bU){var bV;bV=(((bs.StringApply())(bU))(be.Static))(function(bW){return bf.DynamicCustom(bW,bU.get_View());});return L.Append(bV[0],bV[1]);};bf.Checked=function(bU){var bV;bV=(((bs.BoolCheckedApply())(bU))(be.Static))(function(bW){return bf.DynamicCustom(bW,bU.get_View());});return L.Append(bV[0],bV[1]);};bf.IntValue=function(bU){var bV;bV=(((bs.IntApplyChecked())(bU))(be.Static))(function(bW){return bf.DynamicCustom(bW,bU.get_View());});return L.Append(bV[0],bV[1]);};bf.IntValueUnchecked=function(bU){var bV;bV=(((bs.IntApplyUnchecked())(bU))(be.Static))(function(bW){return bf.DynamicCustom(bW,bU.get_View());});return L.Append(bV[0],bV[1]);};bf.FloatValue=function(bU){var bV;bV=(((bs.FloatApplyChecked())(bU))(be.Static))(function(bW){return bf.DynamicCustom(bW,bU.get_View());});return L.Append(bV[0],bV[1]);};bf.FloatValueUnchecked=function(bU){var bV;bV=(((bs.FloatApplyUnchecked())(bU))(be.Static))(function(bW){return bf.DynamicCustom(bW,bU.get_View());});return L.Append(bV[0],bV[1]);};bf.Dynamic=function(bU,bV){return be.Dynamic(bV,function(bW){return function(bX){return bW.setAttribute(bU,bX);};});};bf.DynamicCustom=function(bU,bV){return be.Dynamic(bV,bU);};bh=bg.T=bQ.Class({GetEnumerator:function(){return new W.New(this,null,function(bU){var bV;bV=bU.s;return bV.$==0?false:(bU.c=bV.$0,bU.s=bV.$1,true);},void 0);},GetEnumerator0:function(){return V.Get(this);}},null,bh);bh.Empty=new bh({$:0});bi.concat=function(bU,bV){return n.ofSeq(bV).join(bU);};bi.SplitChars=function(bU,bV,bW){return bi.Split(bU,new a.RegExp("["+bi.RegexEscape(bV.join(""))+"]"),bW);};bi.StartsWith=function(bU,bV){return bU.substring(0,bV.length)==bV;};bi.Split=function(bU,bV,bW){return bW===1?n.filter(function(bX){return bX!=="";},bi.SplitWith(bU,bV)):bi.SplitWith(bU,bV);};bi.RegexEscape=function(bU){return bU.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bi.SplitWith=function(bU,bV){return bU.split(bV);};bi.forall=function(bU,bV){return P.forall(bU,bi.protect(bV));};bi.protect=function(bU){return bU===null?"":bU;};bj=g.Updates=bQ.Class({},null,bj);bj.Create=function(bU){var bV;bV=null;bV=bj.New(bU,null,function(){var bW;bW=bV.s;return bW===null?(bW=v.Copy(bV.c()),bV.s=bW,v.WhenObsoleteRun(bW,function(){bV.s=null;}),bW):bW;});return bV;};bj.New=function(bU,bV,bW){return new bj({c:bU,s:bV,v:bW});};bk=y.ValueCollection=bQ.Class({GetEnumerator$1:function(){return V.Get(P.map(function(bU){return bU.V;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},f,bk);bk.New=bQ.Ctor(function(bU){f.New.call(this);this.d=bU;},bk);bm.New=function(bU,bV){return{PreviousNodes:bU,Top:bV};};bn.get_Empty=function(){return{$:0,$0:new O.New$3()};};bn.FindAll=function(bU){var bV;function bW(bZ,b0){var b1,b2,b3,b4,b5;while(true)switch(bZ){case 0:if(b0!=null&&b0.$==0){b2=b0.$1;b3=b0.$0;bW(0,b3);b0=b2;}else if(b0!=null&&b0.$==1){b4=b0.$0;b0=b4;bZ=1;}else if(b0!=null&&b0.$==2){b5=b0.$0;b0=b5.Current;}else return b0!=null&&b0.$==6?(b1=b0.$0.Holes,(function(b6){return function(b7){n.iter(b6,b7);};}(bY))(b1)):null;break;case 1:bV.push(b0);b0=b0.Children;bZ=0;break;}}function bX(bZ){return bW(0,bZ);}function bY(bZ){return bW(1,bZ);}bV=[];bX(bU);return{$:0,$0:new O.New$2(bV)};};bn.Filter=function(bU,bV){return{$:0,$0:bD.Filter(bU,bV.$0)};};bn.Except=function(bU,bV){return{$:0,$0:bD.Except(bU.$0,bV.$0)};};bn.ToArray=function(bU){return bD.ToArray(bU.$0);};bn.Intersect=function(bU,bV){return{$:0,$0:bD.Intersect(bU.$0,bV.$0)};};bo.Delay=function(bU){return function(bV){try{(bU(null))(bV);}catch(bW){bV.k({$:1,$0:bW});}};};bo.Bind=function(bU,bV){return bo.checkCancel(function(bW){bU(bA.New(function(bX){var bY;if(bX.$==0){bY=bX.$0;bo.scheduler().Fork(function(){try{(bV(bY))(bW);}catch(bZ){bW.k({$:1,$0:bZ});}});}else bo.scheduler().Fork(function(){bW.k(bX);});},bW.ct));});};bo.Zero=function(){bB.$cctor();return bB.Zero;};bo.Start=function(bU,bV){var bW,bX;bW=(bX=(bo.defCTS())[0],bV==null?bX:bV.$0);bo.scheduler().Fork(function(){if(!bW.c)bU(bA.New(function(bY){if(bY.$==1)bo.UncaughtAsyncError(bY.$0);},bW));});};bo.Return=function(bU){return function(bV){bV.k({$:0,$0:bU});};};bo.scheduler=function(){bB.$cctor();return bB.scheduler;};bo.checkCancel=function(bU){return function(bV){if(bV.ct.c)bo.cancel(bV);else bU(bV);};};bo.defCTS=function(){bB.$cctor();return bB.defCTS;};bo.UncaughtAsyncError=function(bU){bR.log("WebSharper: Uncaught asynchronous exception",bU);};bo.FromContinuations=function(bU){return function(bV){var bW;function bX(bY){if(bW[0])i.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bW[0]=true;bo.scheduler().Fork(bY);}}bW=[false];bU(function(bY){bX(function(){bV.k({$:0,$0:bY});});},function(bY){bX(function(){bV.k({$:1,$0:bY});});},function(bY){bX(function(){bV.k({$:2,$0:bY});});});};};bo.cancel=function(bU){bU.k({$:2,$0:new bK.New(bU.ct)});};bp.UseAnimations=function(){bu.$cctor();return bu.UseAnimations;};bp.Actions=function(bU){return bp.ConcatActions(n.choose(function(bV){return bV.$==1?{$:1,$0:bV.$0}:null;},bv.ToArray(bU.$0)));};bp.Finalize=function(bU){n.iter(function(bV){if(bV.$==0)bV.$0();},bv.ToArray(bU.$0));};bp.ConcatActions=function(bU){var bV,bW,bX,bY;bV=bc.ofSeqNonCopying(bU);bW=n.length(bV);return bW===0?bp.Const():bW===1?n.get(bV,0):(bX=P.max(P.map(function(bZ){return bZ.Duration;},bV)),(bY=n.map(function(bZ){return bp.Prolong(bX,bZ);},bV),bp.Def(bX,function(bZ){n.iter(function(b0){b0.Compute(bZ);},bY);})));};bp.List=function(bU){return bU.$0;};bp.Const=function(bU){return bp.Def(0,function(){return bU;});};bp.Def=function(bU,bV){return{Compute:bV,Duration:bU};};bp.Prolong=function(bU,bV){var bW,bX,bY;bW=bV.Compute;bX=bV.Duration;bY=bL.Create(function(){return bV.Compute(bV.Duration);});return{Compute:function(bZ){return bZ>=bX?bY.f():bW(bZ);},Duration:bU};};bq.$cctor=function(){bq.$cctor=a.ignore;bq.BatchUpdatesEnabled=true;};br.concat=function(bU){var bV,bW;bV=[];for(var bX in bU)bV.push.apply(bV,bU[bX]);return bV;};bs.StringApply=function(){bw.$cctor();return bw.StringApply;};bs.BoolCheckedApply=function(){bw.$cctor();return bw.BoolCheckedApply;};bs.IntApplyChecked=function(){bw.$cctor();return bw.IntApplyChecked;};bs.IntApplyUnchecked=function(){bw.$cctor();return bw.IntApplyUnchecked;};bs.FloatApplyChecked=function(){bw.$cctor();return bw.FloatApplyChecked;};bs.FloatApplyUnchecked=function(){bw.$cctor();return bw.FloatApplyUnchecked;};bs.ApplyValue=function(bU,bV,bW,bX,bY){return[bX(function(bZ){function b0(){bW.UpdateMaybe(function(b1){var b2,b3;b2=bU(bZ);return b2!=null&&b2.$==1&&(!q.Equals(b2.$0,b1)&&(b3=[b2,b2.$0],true))?b3[0]:null;});}bZ.addEventListener("change",b0);bZ.addEventListener("input",b0);bZ.addEventListener("keypress",b0);}),bY(function(bZ){return function(b0){var b1,b2;b1=bU(bZ);return b1!=null&&b1.$==1&&(q.Equals(b1.$0,b0)&&(b2=b1.$0,true))?null:bV(bZ,b0);};})];};bs.StringSet=function(){bw.$cctor();return bw.StringSet;};bs.StringGet=function(){bw.$cctor();return bw.StringGet;};bs.IntSetUnchecked=function(){bw.$cctor();return bw.IntSetUnchecked;};bs.IntGetUnchecked=function(){bw.$cctor();return bw.IntGetUnchecked;};bs.IntSetChecked=function(){bw.$cctor();return bw.IntSetChecked;};bs.IntGetChecked=function(){bw.$cctor();return bw.IntGetChecked;};bs.FloatSetUnchecked=function(){bw.$cctor();return bw.FloatSetUnchecked;};bs.FloatGetUnchecked=function(){bw.$cctor();return bw.FloatGetUnchecked;};bs.FloatSetChecked=function(){bw.$cctor();return bw.FloatSetChecked;};bs.FloatGetChecked=function(){bw.$cctor();return bw.FloatGetChecked;};bt.$cctor=function(){var bU;bt.$cctor=a.ignore;bt.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bt.rtagName=new a.RegExp("<([\\w:]+)");bt.rhtml=new a.RegExp("<|&#?\\w+;");bt.wrapMap=(bU=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:bU,tbody:bU,tfoot:bU,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bt.defaultWrap=[0,"",""];};bu.$cctor=function(){bu.$cctor=a.ignore;bu.CubicInOut=bz.Custom(function(bU){var bV;bV=bU*bU;return 3*bV-2*(bV*bU);});bu.UseAnimations=true;};bv.Append=function(bU,bV){return bU.$==0?bV:bV.$==0?bU:{$:2,$0:bU,$1:bV};};bv.ToArray=function(bU){var bV;function bW(bX){var bY,bZ;while(true)if(bX.$==1)return bV.push(bX.$0);else if(bX.$==2){bY=bX.$1;bZ=bX.$0;bW(bZ);bX=bY;}else return bX.$==3?n.iter(function(b0){bV.push(b0);},bX.$0):null;}bV=[];bW(bU);return bV.slice(0);};bv.Concat=function(bU){var bV;bV=bc.ofSeqNonCopying(bU);return bc.TreeReduce(bv.Empty(),bv.Append,bV);};bv.Empty=function(){bM.$cctor();return bM.Empty;};bg.head=function(bU){return bU.$==1?bU.$0:bg.listEmpty();};bg.tail=function(bU){return bU.$==1?bU.$1:bg.listEmpty();};bg.listEmpty=function(){return i.FailWith("The input list was empty.");};bw.$cctor=function(){var bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3;bw.$cctor=a.ignore;bw.EmptyAttr=null;bw.BoolCheckedApply=bQ.Curried3(function(b4,b5,b6){return[b5(function(b7){b7.addEventListener("change",function(){return!q.Equals(b4.Get(),b7.checked)?b4.Set(b7.checked):null;});}),b6(function(b7){return function(b8){b7.checked=b8;};})];});bw.StringSet=function(b4){return function(b5){b4.value=b5;};};bw.StringGet=function(b4){return{$:1,$0:b4.value};};bw.StringApply=(bU=bs.StringGet(),(bV=bs.StringSet(),bQ.Curried(bs.ApplyValue,3,[bU,function(b4,b5){return(bV(b4))(b5);}])));bw.IntSetUnchecked=function(b4){return function(b5){b4.value=a.String(b5);};};bw.IntGetUnchecked=function(b4){var b5,b6;b5=b4.value;return bE.isBlank(b5)?{$:1,$0:0}:(b6=+b5,b6!==b6>>0?null:{$:1,$0:b6});};bw.IntApplyUnchecked=(bW=bs.IntGetUnchecked(),(bX=bs.IntSetUnchecked(),bQ.Curried(bs.ApplyValue,3,[bW,function(b4,b5){return(bX(b4))(b5);}])));bw.IntSetChecked=function(b4){return function(b5){var b6;b6=b5.get_Input();return b4.value!==b6?void(b4.value=b6):null;};};bw.IntGetChecked=function(b4){var b5,b6,b7;b5=b4.value;return{$:1,$0:bE.isBlank(b5)?(b4.checkValidity?b4.checkValidity():true)?new M({$:2,$0:b5}):new M({$:1,$0:b5}):(b6=(b7=0,[N.TryParseInt32(b5,{get:function(){return b7;},set:function(b8){b7=b8;}}),b7]),b6[0]?new M({$:0,$0:b6[1],$1:b5}):new M({$:1,$0:b5}))};};bw.IntApplyChecked=(bY=bs.IntGetChecked(),(bZ=bs.IntSetChecked(),bQ.Curried(bs.ApplyValue,3,[bY,function(b4,b5){return(bZ(b4))(b5);}])));bw.FloatSetUnchecked=function(b4){return function(b5){b4.value=a.String(b5);};};bw.FloatGetUnchecked=function(b4){var b5,b6;b5=b4.value;return bE.isBlank(b5)?{$:1,$0:0}:(b6=+b5,a.isNaN(b6)?null:{$:1,$0:b6});};bw.FloatApplyUnchecked=(b0=bs.FloatGetUnchecked(),(b1=bs.FloatSetUnchecked(),bQ.Curried(bs.ApplyValue,3,[b0,function(b4,b5){return(b1(b4))(b5);}])));bw.FloatSetChecked=function(b4){return function(b5){var b6;b6=b5.get_Input();return b4.value!==b6?void(b4.value=b6):null;};};bw.FloatGetChecked=function(b4){var b5,b6;b5=b4.value;return{$:1,$0:bE.isBlank(b5)?(b4.checkValidity?b4.checkValidity():true)?new M({$:2,$0:b5}):new M({$:1,$0:b5}):(b6=+b5,a.isNaN(b6)?new M({$:1,$0:b5}):new M({$:0,$0:b6,$1:b5}))};};bw.FloatApplyChecked=(b2=bs.FloatGetChecked(),(b3=bs.FloatSetChecked(),bQ.Curried(bs.ApplyValue,3,[b2,function(b4,b5){return(b3(b4))(b5);}])));};bx=g.DynamicAttrNode=bQ.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bU){return _9.get_Empty();},NGetEnterAnim:function(bU){return _9.get_Empty();},NGetChangeAnim:function(bU){return _9.get_Empty();},NSync:function(bU){if(this.dirty){(this.push(bU))(this.value);this.dirty=false;}}},f,bx);bx.New=bQ.Ctor(function(bU,bV){var bW;bW=this;f.New.call(this);this.push=bV;this.value=void 0;this.dirty=false;this.updates=J.Map(function(bX){bW.value=bX;bW.dirty=true;},bU);},bx);by=bo.Scheduler=bQ.Class({Fork:function(bU){var bV;bV=this;this.robin.push(bU);if(this.idle){this.idle=false;a.setTimeout(function(){bV.tick();},0);}},tick:function(){var bU,bV,bW;bV=this;bW=bT.now();bU=true;while(bU)if(this.robin.length===0){this.idle=true;bU=false;}else{(this.robin.shift())();bT.now()-bW>40?(a.setTimeout(function(){bV.tick();},0),bU=false):void 0;}}},f,by);by.New=bQ.Ctor(function(){f.New.call(this);this.idle=true;this.robin=[];},by);bz=g.Easing=bQ.Class({},f,bz);bz.Custom=function(bU){return new bz.New(bU);};bz.New=bQ.Ctor(function(bU){f.New.call(this);this.transformTime=bU;},bz);bA.New=function(bU,bV){return{k:bU,ct:bV};};bB.$cctor=function(){bB.$cctor=a.ignore;bB.noneCT=bC.New(false,[]);bB.scheduler=new by.New();bB.defCTS=[new bF.New()];bB.Zero=bo.Return();bB.GetCT=function(bU){bU.k({$:0,$0:bU.ct});};};bC.New=function(bU,bV){return{c:bU,r:bV};};bD.Filter=function(bU,bV){return new O.New$2(n.filter(bU,bD.ToArray(bV)));};bD.Except=function(bU,bV){var bW;bW=new O.New$2(bD.ToArray(bV));bW.ExceptWith(bD.ToArray(bU));return bW;};bD.ToArray=function(bU){var bV;bV=n.create(bU.get_Count(),void 0);bU.CopyTo(bV);return bV;};bD.Intersect=function(bU,bV){var bW;bW=new O.New$2(bD.ToArray(bU));bW.IntersectWith(bD.ToArray(bV));return bW;};bE.isBlank=function(bU){return bi.forall(bI.IsWhiteSpace,bU);};bF=b.CancellationTokenSource=bQ.Class({},f,bF);bF.New=bQ.Ctor(function(){f.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bF);bG.Children=function(bU,bV){var bW,bX,bY;if(bV!=null&&bV.$==1){bY=[];bW=bV.$0[0].nextSibling;while(bW!==bV.$0[1]){bY.push(bW);bW=bW.nextSibling;}return{$:0,$0:bY};}else return{$:0,$0:n.init(bU.childNodes.length,(bX=bU.childNodes,function(bZ){return bX[bZ];}))};};bG.Except=function(bU,bV){var bW;bW=bU.$0;return{$:0,$0:n.filter(function(bX){return n.forall(function(bY){return!(bX===bY);},bW);},bV.$0)};};bG.Iter=function(bU,bV){n.iter(bU,bV.$0);};bG.DocChildren=function(bU){var bV;function bW(bX){var bY,bZ,b0,b1;while(true){if(bX!=null&&bX.$==2){bZ=bX.$0;bX=bZ.Current;}else if(bX!=null&&bX.$==1)return bV.push(bX.$0.El);else if(bX==null)return null;else if(bX!=null&&bX.$==5)return bV.push(bX.$0);else if(bX!=null&&bX.$==4)return bV.push(bX.$0.Text);else if(bX!=null&&bX.$==6){bY=bX.$0.Els;return(function(b2){return function(b3){n.iter(b2,b3);};}(function(b2){if(b2==null||b2.constructor===K)bW(b2);else bV.push(b2);}))(bY);}else{b0=bX.$1;b1=bX.$0;bW(b1);bX=b0;}}}bV=[];bW(bU.Children);return{$:0,$0:bc.ofSeqNonCopying(bV)};};bH.Clear=function(bU){bU.splice(0,n.length(bU));};bI.IsWhiteSpace=function(bU){return bU.match(new a.RegExp("\\s"))!==null;};N.TryParse=function(bU,bV,bW,bX){var bY,bZ;bY=+bU;bZ=bY===bY-bY%1&&bY>=bV&&bY<=bW;if(bZ)bX.set(bY);return bZ;};bK=b.OperationCanceledException=bQ.Class({},bJ,bK);bK.New=bQ.Ctor(function(bU){bK.New$1.call(this,"The operation was canceled.",null,bU);},bK);bK.New$1=bQ.Ctor(function(bU,bV,bW){this.message=bU;this.inner=bV;K.setPrototypeOf(this,bK.prototype);this.ct=bW;},bK);bL.Create=function(bU){return bO.New(false,bU,bL.forceLazy);};bL.forceLazy=function(){var bU;bU=this.v();this.c=true;this.v=bU;this.f=bL.cachedLazy;return bU;};bL.cachedLazy=function(){return this.v;};bM.$cctor=function(){bM.$cctor=a.ignore;bM.Empty={$:0};};bO.New=function(bU,bV,bW){return{c:bU,v:bV,f:bW};};bQ.OnLoad(function(){e.Main();});}(self));


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
